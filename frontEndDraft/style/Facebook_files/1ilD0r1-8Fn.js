if (self.CavalryLogger) { CavalryLogger.start_js(["zfgaT"]); }

__d("AdsInterfacesComponentsEventCategory",[],(function a(b,c,d,e,f,g){f.exports={ERRORS:"errors",GENERAL:"general"};}),null);
__d("AdsInterfacesComponentsEventName",[],(function a(b,c,d,e,f,g){f.exports={BIG_ADOPTION_NO_CONTEXT_THEME:"big_adoption_no_context_theme",BIG_ADOPTION_EXCEPTION:"big_adoption_exception",BIG_COMPONENT_ERROR:"big_component_error",DEPRECATE_CALLED:"deprecate_called"};}),null);
__d("AdsLoggerConstants",[],(function a(b,c,d,e,f,g){f.exports={DAO_ERROR_EVENT_NAME:"dao_error",ERROR_EVENT_CATEGORY:"errors",UNHANDLED_JS_EXCEPTION_EVENT_NAME:"unhandled_js_exception"};}),null);
__d("ComposedBlockType",[],(function a(b,c,d,e,f,g){f.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9,HEADER_THREE:10,HEADER_FOUR:11,HEADER_FIVE:12,HEADER_SIX:13};}),null);
__d("ComposedEntityType",[],(function a(b,c,d,e,f,g){f.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7,EMBED:8,EMOJI:9};}),null);
__d("ComposedInlineStyle",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64};}),null);
__d("ComposerTargetType",[],(function a(b,c,d,e,f,g){f.exports={SELF_USER:"feed",OTHER_USER:"wall",GROUP:"group",PAGE:"page",EVENT:"event",RECOMMENDATION:"recommendation",FUNDRAISER:"fundraiser",EXAMPLE:"example",MARKETPLACE:"marketplace",ALBUM:"album",OTHER:"other"};}),null);
__d("ImageExtensions",[],(function a(b,c,d,e,f,g){f.exports={GIF:"gif",JPG:"jpg",PNG:"png",ICO:"ico",BMP:"bmp",WEBP:"webp",BEST:"best",PNG2JPG:"png2jpg"};}),null);
__d("PublishingToolsSource",[],(function a(b,c,d,e,f,g){f.exports={ADS_CANVAS_LANDING_PAGE:"ads_canvas_landing_page",COPYRIGHT_MATCH_PERMALINK:"copyright_match_permalink",DRAFTS_POSTS_TIMELINE_PAGELET:"draft_timeline_pagelet",EXPIRING_POSTS_TIMELINE_PAGELET:"expiring_timeline_pagelet",IA_URL_GROWTH_QP:"ia_url_growth_qp",NOTIFICATION:"notif",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",PAGES_MANAGER_BAR:"pages_manager_bar",PAYMENT_SETTINGS_HEADER:"payment_settings_header",SCHEDULED_POSTS_TIMELINE_PAGELET:"scheduled_timeline_pagelet",UNKNOWN:"unknown",VIDEO_INSIGHTS:"video_insights",VIDEO_UPLOAD_CONFIRMATION_DIALOG:"video_upload_confirmation_dialog",VIDEOS_HUB:"videos_hub",VIDEOS_YOU_CAN_USE_TIMELINE_PAGELET:"crossposted_timeline_pagelet",VIDEO_EDIT_PERMALINK:"video_edit_permalink",VIDEO_LIBRARY_MEGAPHONE:"video_library_megaphone",VIDEO_UPLOAD_NOTIF:"video_upload_notif",LEAD_GEN_DOWNLOAD_DIALOG_FORMS_LIB:"lead_gen_download_dialog_forms_lib",LEAD_GEN_DOWNLOAD_DIALOG_NAM:"lead_gen_download_dialog_nam",LEAD_GEN_DOWNLOAD_DIALOG_NAM_LINK:"lead_gen_download_dialog_nam_link",LEAD_GEN_DOWNLOAD_DIALOG_PE:"lead_gen_download_dialog_pe",LEAD_GEN_DOWNLOAD_DIALOG_PE_LINK:"lead_gen_download_dialog_pe_link",LEAD_GEN_DOWNLOAD_DIALOG_OTHER:"lead_gen_download_dialog_other",LEAD_GEN_FORM_LIBRARY_NOTICE:"lead_gen_form_library_notice",LEAD_GEN_INLINE_FORM_SELECTOR:"lead_gen_inline_form_selector",LEAD_GEN_ORGANIC:"lead_gen_organic",WWW_CHATBAR:"www_chatbar"};}),null);
__d("ShareModeConst",[],(function a(b,c,d,e,f,g){f.exports={SELF_PAGE:"selfpage",PAGE:"page",SELF_POST:"self",FRIEND:"friend",GROUP:"group",ALBUM:"album",MESSAGE:"message",ONE_CLICK:"oneclick",EVENT:"event",UNKNOWN:"unknown",OWN_POST:"own"};}),null);
__d("StickerAssetType",[],(function a(b,c,d,e,f,g){f.exports={IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"};}),null);
__d("VideoCreatorProductType",[],(function a(b,c,d,e,f,g){f.exports={LEGACY:0,UNSPECIFIED:1,CORE_VIDEOS:2,LOOPS:3,ANIMATED_GIFS:4,SLIDESHOW:5,PROFILE_VIDEO:6,SPHERICAL:7,LIVE_PHOTO:8,BIRTHDAY_VIDEO:9,STORYLINE:10,FRIENDS_DAY_2016:11,FRIENDVERSARY:12,STORYLINE_WITH_EXTERNAL_MUSIC:13,GOODWILL_VIDEO_BIRTHDAY:14,GOODWILL_VIDEO_ANNIVERSARY:15,GOODWILL_VIDEO_FACEVERSARY:16,GOODWILL_VIDEO_YIR16:17,GOODWILL_VIDEO_FRIENDSDAY17:18,GOODWILL_VIDEO_FRIEND_BIRTHDAY_VIDEO:19,VIDEO_ADS_ICEBERG:20,GOODWILL_VIDEO_TWO_BILLION:21,GOODWILL_VIDEO_RECAP:22,GOODWILL_VIDEO_ANNIVERSARY_V2:23};}),null);
__d('AdsLogger',['AdsLoggerConstants','AdsUnifiedLoggingConfig','Banzai','ErrorUtils','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){this.$AdsLogger4=i;this.$AdsLogger2=c('ErrorUtils').guard(j||c('emptyFunction').thatReturnsNull);this.$AdsLogger3=k||c('emptyFunction').thatReturnsNull;this.$AdsLogger1=l||'logger';c('ErrorUtils').addListener(function(m){if(this.__shouldSilenceError(m))return;var n={error_message:m.message,error_type:m.name,stack_trace:m.stack,error_data:JSON.stringify(m),error_script:m.script,error_line:m.line};this.logError(c('AdsLoggerConstants').UNHANDLED_JS_EXCEPTION_EVENT_NAME,n);}.bind(this));}h.prototype.__shouldSilenceError=function(i){return !!i.type&&i.type!=='mustfix';};h.prototype.logForAnalytics=function(i,j,k){k=k||{};var l=k.vital===undefined?true:k.vital;delete k.vital;var m=babelHelpers['extends']({},this.$AdsLogger2(),k,{event_category:i,event:j});this.$AdsLogger5(j||'',m,c('AdsUnifiedLoggingConfig').stack_traces);if(!m.event)m.stack_trace=new Error('No Event.').stack||'none';c('Banzai').post(this.$AdsLogger1+':'+this.$AdsLogger4,m,l?c('Banzai').VITAL:c('Banzai').BASIC);};h.prototype.$AdsLogger6=function(i){if(i===1){return true;}else if(i<=0){return false;}else return Math.floor(Math.random()*Math.floor(i)+1)===1;};h.prototype.$AdsLogger5=function(i,j,k){var l=k[i.toLowerCase()];if(l&&this.$AdsLogger6(l)){var m=new Error('Requested Stack-Trace.'),n=c('ErrorUtils').normalizeError(m);j.stack_trace=n.stack;}};h.prototype.logError=function(i,j){var k=this.$AdsLogger7();this.logForAnalytics(c('AdsLoggerConstants').ERROR_EVENT_CATEGORY,i,babelHelpers['extends']({},j,k));};h.prototype.$AdsLogger7=function(){var i={};try{i=this.$AdsLogger3();}catch(j){i={reason:'Error while invoking app error callback!',rawError:j};}return i;};f.exports=h;}),null);
__d('AdsInterfacesLogger',['invariant','Map','Set'],(function a(b,c,d,e,f,g,h){'use strict';var i,j='primary',k='secondary',l='ads_interfaces_logger_primary_app',m='ads_interfaces_logger_secondary_app',n=(i={},i[j]={data:[],isRegistered:false},i[k]={data:[],isRegistered:false},i),o=new (c('Map'))(),p=new (c('Set'))();q.__reset=function(){n[j]={data:[],isRegistered:false};if(o.has(l))o['delete'](l);n[k]={data:[],isRegistered:false};if(o.has(m))o['delete'](m);p=new (c('Set'))();};q.getPath=function(r){return r===j?l:m;};q.log=function(r){var s=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(s===k&&!n[s].isRegistered&&n[j].isRegistered)s=j;if(!n[s].isRegistered){n[s].data.push(r);return;}var t=o.get(this.getPath(s));t||h(0);t instanceof q||h(0);t.__log(r);};q.logOnce=function(r){var s=arguments.length<=1||arguments[1]===undefined?k:arguments[1],t=JSON.stringify(r);if(p.has(t))return;q.log(r,s);p.add(t);};q.get=function(){var r=arguments.length<=0||arguments[0]===undefined?k:arguments[0];if(r===k&&!n[r].isRegistered&&n[j].isRegistered)r=j;var s=o.get(this.getPath(r));return s;};function q(r,s){this.__log=r.log;this.__interfaceID=s;}q.prototype.getInterfaceID=function(){return this.__interfaceID;};q.prototype.register=function(r){o.set(this.constructor.getPath(r),this);n[r].isRegistered=true;if(n[r].data.length>0){n[r].data.forEach(this.__log);n[r].data=[];}if(r===j&&n[k].data.length>0){n[k].data.forEach(this.__log);n[k].data=[];}};q.prototype.unregister=function(r){o['delete'](this.constructor.getPath(r));n[r].isRegistered=false;};q.LOG_TYPE_PRIMARY_APP=j;q.LOG_TYPE_SECONDARY_APP=k;f.exports=q;}),null);
__d('AdsInterfacesComponentsLogger',['AdsInterfacesComponentsEventCategory','AdsInterfacesComponentsEventName','AdsInterfacesLogger','AdsLogger'],(function a(b,c,d,e,f,g){'use strict';var h,i,j='unified_logging',k='components';h=babelHelpers.inherits(l,c('AdsLogger'));i=h&&h.prototype;function l(){i.constructor.call(this,k,undefined,undefined,j);}l.prototype.getInterfaceID=function(){return this.__interface_id;};l.prototype.setInterfaceID=function(m){this.__interface_id=m;};l.prototype.logForAnalytics=function(m,n,o){o=o||{};if(!o.interface_id){var p=this.getInterfaceID();if(!p){var q=c('AdsInterfacesLogger').get();if(q)p=q.getInterfaceID();}if(p)o.interface_id=p;}i.logForAnalytics.call(this,m,n,o);};l.prototype.logBIGComponentError=function(m,n){this.logForAnalytics(c('AdsInterfacesComponentsEventCategory').ERRORS,c('AdsInterfacesComponentsEventName').BIG_COMPONENT_ERROR,{caller:n,message:m.message,stack_trace:m.stack});};l.prototype.__shouldSilenceError=function(m){return true;};f.exports=new l();}),null);
__d('BandicootSession',[],(function a(b,c,d,e,f,g){'use strict';var h={ACTIVE:'ACTIVE',INACTIVE:'INACTIVE',CLOSED:'CLOSED'},i=10*60*1000,j=14*24*60*60*1000;function k(p){return Date.now()-p.lastUpdated;}function l(p){return !!(typeof p==='object'&&p&&p.lastUpdated&&p.status);}function m(p){if(p.status===h.CLOSED){return false;}else if(p.status===h.INACTIVE&&k(p)>i)return false;return true;}function n(p){return p.status===h.ACTIVE&&k(p)>i;}function o(p){return k(p)>j;}f.exports={Status:h,isValidSession:l,isTrackedSession:m,isOrphanSession:o,isCrashedSession:n};}),null);
__d('Bandicoot',['invariant','BandicootSession'],(function a(b,c,d,e,f,g,h){'use strict';var i=5*1000,j=i*2,k='Bandicoot:',l=c('BandicootSession').Status,m=c('BandicootSession').isValidSession,n=c('BandicootSession').isTrackedSession,o=c('BandicootSession').isCrashedSession,p=c('BandicootSession').isOrphanSession;function q(){try{var t=window.localStorage;if(t){var u='__test'+Date.now();t.setItem(u,'');t.removeItem(u);}return t;}catch(v){return null;}}var r=q();function s(t){'use strict';this.$Bandicoot5=k+t;this.$Bandicoot4={};this.$Bandicoot1=this.$Bandicoot7.bind(this);this.sessionID=null;this.sessionStartTime=null;this.storage=r;}s.prototype.getCrashTimeData=function(){'use strict';var t=window.performance&&window.performance.memory||{},u=this.sessionStartTime;return {duration:u?Date.now()-u:0,tabs:Object.keys(this.$Bandicoot8()).length,jsHeapSizeLimit:t.jsHeapSizeLimit,totalJSHeapSize:t.totalJSHeapSize,usedJSHeapSize:t.usedJSHeapSize,elementsInDOM:document.getElementsByTagName('*').length,uri:window.location.href};};s.prototype.getLogTimeData=function(){'use strict';return {userAgent:window.navigator.userAgent};};s.prototype.logCrash=function(t,u,v){'use strict';var w=Object.assign({sessionID:t},u,v);};s.prototype.logBrowserUnsupported=function(){'use strict';};s.prototype.logTrackingError=function(){'use strict';};s.prototype.startSession=function(){'use strict';if(!this.storage){this.logBrowserUnsupported();return;}if(this.$Bandicoot2)return;if(!this.sessionID)this.sessionID=Math.random().toString(36).slice(2,9);if(!this.sessionStartTime)this.sessionStartTime=Date.now();this.$Bandicoot2=setInterval(function(){this.$Bandicoot9();}.bind(this),i);this.$Bandicoot9();if(document.addEventListener)document.addEventListener('visibilitychange',this.$Bandicoot1);this.$Bandicoot10();};s.prototype.endSession=function(){'use strict';if(!this.storage)return;if(!this.$Bandicoot2)return;clearInterval(this.$Bandicoot2);this.$Bandicoot2=null;if(!this.$Bandicoot3)this.$Bandicoot11({status:l.CLOSED});this.sessionID=null;this.sessionStartTime=null;if(document.removeEventListener)document.removeEventListener('visibilitychange',this.$Bandicoot1);};s.prototype.logKnownCrashes=function(){'use strict';if(!this.storage)return;if(!this.$Bandicoot2){var t=this.$Bandicoot8();t=this.$Bandicoot12(t,function(u,v){if(o(u)){this.logCrash(v,u,this.getLogTimeData());return null;}else return u;}.bind(this));this.$Bandicoot13(t);}};s.prototype.$Bandicoot14=function(){'use strict';var t=this.sessionID;t||h(0);return t;};s.prototype.$Bandicoot9=function(){'use strict';var t=this.$Bandicoot8();this.$Bandicoot15(t);t=this.$Bandicoot16(t);this.$Bandicoot13(t);};s.prototype.$Bandicoot15=function(t){'use strict';var u=this.$Bandicoot14(),v=t[u]?t[u]:{};t[u]=babelHelpers['extends']({},v,this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$Bandicoot17()});};s.prototype.$Bandicoot12=function(t,u){'use strict';var v={};Object.keys(t).forEach(function(w){var x=t[w];if(m(x)&&n(x)&&!p(x)){var y=u(x,w);if(y)v[w]=y;}});return v;};s.prototype.$Bandicoot16=function(t){'use strict';return this.$Bandicoot12(t,function(u,v){if(o(u)){var w=u.loggerReportTime||0;if(Date.now()-w>j){u.loggerReportTime=Date.now();u.loggerReportSession=this.$Bandicoot14();}else if(u.loggerReportSession==this.$Bandicoot14()){this.logCrash(v,u,this.getLogTimeData());this.$Bandicoot4[v]=true;return null;}}return u;}.bind(this));};s.prototype.$Bandicoot8=function(t){'use strict';t=t||this.$Bandicoot5;var u=this.storage.getItem(t)||'{}';try{u=JSON.parse(u);}catch(v){u={};this.storage.removeItem(t);}return u;};s.prototype.$Bandicoot11=function(t){'use strict';t.lastUpdated=Date.now();var u=this.$Bandicoot8(),v=this.sessionID;if(v&&u[v]){Object.assign(u[v],t);this.$Bandicoot13(u);}};s.prototype.$Bandicoot13=function(t){'use strict';var u=JSON.stringify(t);try{this.storage.setItem(this.$Bandicoot5,u);}catch(x){var v=this.$Bandicoot6,w=Date.now();if(!v||w>v+i){this.logTrackingError();this.$Bandicoot6=w;}try{this.storage.removeItem(this.$Bandicoot5);}catch(y){this.$Bandicoot3=true;this.endSession();}}};s.prototype.$Bandicoot10=function(){'use strict';for(var t=0;t<this.storage.length;++t){var u=this.storage.key(t);if(u.indexOf(k)===0&&u!==this.$Bandicoot5){var v=this.$Bandicoot8(u),w=Object.keys(v).every(function(x){var y=v[x];return !m(y)||p(y);});if(w)this.storage.removeItem(u);}}};s.prototype.$Bandicoot7=function(){'use strict';this.$Bandicoot11({status:this.$Bandicoot17()});};s.prototype.$Bandicoot17=function(){'use strict';return document.hidden?l.INACTIVE:l.ACTIVE;};f.exports=s;}),null);
__d('EncryptedImg',['EncryptedImgUtils','URI','XHRRequest','getCrossOriginTransport'],(function a(b,c,d,e,f,g){var h={insertIntoStyleBackgroundImage:function m(n,o){var p=function(q,r){if(q){q.style.backgroundImage="url('"+r+"')";}}.bind(undefined,o);h.load(n,p);},insertIntoDOM:function m(n,o){var p=function(q,r){if(q){q.setAttribute('src',r);}}.bind(undefined,o);h.load(n,p);},load:function m(n,o){var p=arguments.length<=2||arguments[2]===undefined?true:arguments[2],q=new (c('URI'))(n),r=c('EncryptedImgUtils').extractKey(q),s=i.bind(undefined,r,o,p);s.includeHeaders=true;new (c('XHRRequest'))(q.toString()).setTransportBuilder(c('getCrossOriginTransport')).setMethod('GET').setResponseType('arraybuffer').setResponseHandler(s).send();},dataUrlPrefix:function m(n){var o=arguments.length<=1||arguments[1]===undefined?32:arguments[1];if(!n.startsWith('data:'))return n;var p=n.indexOf(',');if(p<0||p>o)p=o;return n.slice(0,p);}};Object.assign(h,c('EncryptedImgUtils'));f.exports=h;function i(m,n,o,p,q){if(!m){n(l(p,k(q)));return;}var r=j(m),s=new Uint8Array(p),t=s.subarray(2,14);s=s.subarray(14,s.length);var u={name:'AES-GCM',iv:t,tagLength:128};window.crypto.subtle.importKey('raw',r,u,false,['encrypt','decrypt']).then(function(v){return window.crypto.subtle.decrypt(u,v,s);}).then(function(v){if(o){n(l(v,k(q)));}else n(v);})['catch'](function(){});}function j(m){if(typeof m=='string'){var n=new Uint8Array(Math.floor(m.length/2)),o=0;m.replace(/(..)/g,function(p){n[o++]=parseInt(p,16);});return n;}return null;}function k(m){var n='image/jpeg',o=m.toLowerCase().match(/content-type:\s?([\w\/]*)\s/);if(o&&o.length>1)n=o[1];return n;}function l(m,n){var o=new Uint8Array(m),p='';for(var q=0,r=o.byteLength;q<r;++q)p+=String.fromCharCode(o[q]);return 'data:'+n+';base64,'+window.btoa(p);}}),null);
__d('getDOMImageSize',['EncryptedImg','URI'],(function a(b,c,d,e,f,g){function h(m){m.onload=null;m.onerror=null;m.onreadystatechange=null;m._callback=null;m._thisObj=null;m._srcStr=null;m.parentNode&&m.parentNode.removeChild(m);}function i(){var m=this;if(m._callback)m._callback.call(m._thisObj,m.naturalWidth||m.width,m.naturalHeight||m.height,m._srcStr);h(m);}function j(){var m=this;if(m.readyState==='complete')i.call(m);}function k(){var m=this;if(m._callback)m._callback.call(m._thisObj,0,0,m._srcStr);h(m);}function l(m,n,o){o=o||null;if(!m){n.call(o,0,0,'');return;}var p=document.body;if(!p){setTimeout(l.bind(this,m,n,o),500);return;}var q;if(typeof m==='string'){q=m;}else if(typeof m==='object')if(typeof m.width==='number'&&typeof m.height==='number'){if(typeof m.src==='string'){q=m.src;if(m.naturalWidth&&m.naturalHeight){n.call(o,m.naturalWidth,m.naturalHeight,q);return;}}if(typeof m.uri==='string'){q=m.uri;if(m.width&&m.height){n.call(o,m.width,m.height,q);return;}}}else if(m instanceof c('URI'))q=m.toString();if(!q){n(0,0,m);return;}var r=document.createElement('img');r.onreadystatechange=j;r.onload=i;r.onerror=k;r._callback=n;r._thisObj=o;r._srcStr=q;if(c('EncryptedImg').isEncrypted(q)){c('EncryptedImg').insertIntoDOM(q,r);}else r.src=q;r.style.cssText='\n    position:absolute;\n    left:-5000px;\n    top:-5000px;\n    width:auto;\n    height:auto;\n    clip:rect(0 0 0 0);\n  '.replace(/\s+/,' ');p.insertBefore(r,p.firstChild);}f.exports=l;}),null);
__d('CachedDOMImageSizePool',['debounce','getDOMImageSize'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$CachedDOMImageSizePool1={};this.$CachedDOMImageSizePool2=j;this.$CachedDOMImageSizePool3=0;this.$CachedDOMImageSizePool4=i;this.$CachedDOMImageSizePool5=c('debounce')(this.$CachedDOMImageSizePool6,5000,this);this.$CachedDOMImageSizePool7={};this.$CachedDOMImageSizePool8={};}h.prototype.get=function(i,j,k){'use strict';if(!i){j.call(k,0,0,i);return;}var l=this.$CachedDOMImageSizePool1[i];if(l){l.lastAccessTime=Date.now();j.call(k,l.width,l.height,l.src);}else if(this.$CachedDOMImageSizePool7[i]){this.$CachedDOMImageSizePool7[i].push(j);this.$CachedDOMImageSizePool8[i].push(k);}else{this.$CachedDOMImageSizePool7[i]=[j];this.$CachedDOMImageSizePool8[i]=[k];c('getDOMImageSize')(i,this.$CachedDOMImageSizePool9,this);}};h.prototype.set=function(i,j,k){'use strict';if(this.$CachedDOMImageSizePool3>this.$CachedDOMImageSizePool4)this.$CachedDOMImageSizePool5();var l=this.$CachedDOMImageSizePool1;if(i&&!l[i]){var m={width:j,height:k,src:i,lastAccessTime:Date.now()};l[i]=m;this.$CachedDOMImageSizePool3++;}};h.prototype.$CachedDOMImageSizePool9=function(i,j,k){'use strict';this.set(k,i,j);var l=this.$CachedDOMImageSizePool7[k],m=this.$CachedDOMImageSizePool8[k];for(var n=0,o=l.length;n<o;n++)l[n].call(m[n],i,j,k);delete this.$CachedDOMImageSizePool7[k];delete this.$CachedDOMImageSizePool8[k];};h.prototype.$CachedDOMImageSizePool6=function(){'use strict';var i=Date.now(),j=this.$CachedDOMImageSizePool1,k=this.$CachedDOMImageSizePool3,l=this.$CachedDOMImageSizePool2;for(var m in j){var n=j[m];if(i-n.lastAccessTime>l){delete j[m];k--;}}this.$CachedDOMImageSizePool3=k;};f.exports=h;}),null);
__d('BackgroundImage.react',['cx','invariant','CachedDOMImageSizePool','Image.react','React','XUISpinner.react','joinClasses','clamp'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k='(-?(\\d+\\.)?\\d+(px|\\%))',l=new RegExp('^'+k+'?(\\s'+k+')?$','g'),m=new (c('CachedDOMImageSizePool'))(50,10*60*1000),n=c('React').createClass({displayName:'BackgroundImage',propTypes:{src:j.string,width:j.number.isRequired,height:j.number.isRequired,backgroundSize:j.oneOf(['contain','cover','containinside','coverinside']),loadingIndicatorStyle:j.oneOf(['none','large','small']),backgroundPosition:function o(p,q,r){var s=p[q];if(s){typeof s==='string'||i(0);s.match(l)||i(0);}p.backgroundFocus==null||p.backgroundPosition==null||i(0);},backgroundFocus:function o(p,q,r){var s=p[q];if(s){typeof s==='string'||i(0);s.match(l)||i(0);}p.backgroundFocus==null||p.backgroundPosition==null||i(0);},onImageLoad:j.func,optimizeResizeSpeed:j.bool,onContextMenu:j.func},getInitialState:function o(){return {imageWidth:null,imageHeight:null,imageSrc:this.props.src,loading:true};},getDefaultProps:function o(){return {optimizeResizeSpeed:false,loadingIndicatorStyle:'none'};},componentDidMount:function o(){this._resolveImageSize();},componentDidUpdate:function o(p){if(this.props.src!==this.state.imageSrc)this.setState({imageWidth:0,imageHeight:0,imageSrc:this.props.src,loading:true},this._resolveImageSize);},_resolveImageSize:function o(){var p=this.state.imageSrc;if(p)m.get(p,this._onImageSizeResolved,this);},render:function o(){var p={width:this.props.width+'px',height:this.props.height+'px'},q=c('joinClasses')(this.props.className,"_5f0d");return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,q),style:babelHelpers['extends']({},this.props.style||{},p),onContextMenu:this.props.onContextMenu}),this._renderImage(),this._renderContent(),this._renderLoadingIndicator());},_renderLoadingIndicator:function o(){if(!this.state.loading||this.props.loadingIndicatorStyle==='none')return null;return c('React').createElement('div',{className:"_1qe- _5lar"},c('React').createElement('div',{className:"_1qe_"},c('React').createElement('div',{className:"_1qf0"},c('React').createElement(c('XUISpinner.react'),{size:this.props.loadingIndicatorStyle}))));},_renderContent:function o(){if(this.props.children)return c('React').createElement('div',{className:"_1qe-"},c('React').createElement('div',{className:"_1qe_"},c('React').createElement('div',{className:"_1qf0"},this.props.children)));},_renderImage:function o(){if(!this.state.imageWidth||!this.state.imageHeight)return;var p=this.props.width,q=this.props.height,r,s;switch(this.props.backgroundSize){case 'cover':r='cover';s=false;break;case 'coverinside':r='cover';s=true;break;case 'contain':r='contain';s=false;break;case 'containinside':r='contain';s=true;}var t=this.state.imageWidth,u=this.state.imageHeight,v=p/q,w=t/u;if(r==='contain')if((t>p||!s)&&w>=v){t=p;u=t/w;}else if(u>q||!s){u=q;t=u*w;}if(r==='cover')if((t>p||!s)&&w>=v){u=q;t=u*w;}else if(u>q||!s){t=p;u=t/w;}var x=this._getImageStyle(t,u);return c('React').createElement(c('Image.react'),{alt:'',className:"_5i4g"+(this.props.optimizeResizeSpeed?' '+"_5sjv":''),style:x,src:this.state.imageSrc});},_getImageStyle:function o(p,q){var r=['50%','50%'],s=this._getBackgroundPositionPxValue;if(this.props.backgroundPosition){r=this.props.backgroundPosition.split(' ');}else if(this.props.backgroundFocus){r=this.props.backgroundFocus.split(' ');s=this._getBackgroundFocusPxValue;}return {width:Math.round(p)+'px',height:Math.round(q)+'px',left:s(r[0],p,this.props.width),top:s(r[1]||r[0],q,this.props.height)};},_getBackgroundPositionPxValue:function o(p,q,r){var s=parseFloat(p),t=p.substr(s.toString().length);if(t==='px')return p;return Math.round((r-q)*(s/100))+'px';},_getBackgroundFocusPxValue:function o(p,q,r){var s=parseFloat(p),t=p.substr(s.toString().length);if(q<r)return '0';var u=t==='px'?s:Math.round(q*(s/100)),v=u-r/2;v=c('clamp')(v,0,q-r);return -v+'px';},_onImageSizeResolved:function o(p,q,r){if(!this.isMounted()||this.state.imageSrc!==r)return;var s=this.props.onImageLoad?this.props.onImageLoad.bind(null,p,q):null;this.setState({imageWidth:p,imageHeight:q,loading:false},s);}});f.exports=n;}),null);
__d('BUIComponent',['AdsInterfacesComponentsLogger','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.prototype.unstable_handleError=function(l){c('AdsInterfacesComponentsLogger').logBIGComponentError(l,this.constructor.displayName);throw l;};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('BUIProgressBar.react',['cx','BUIComponent','Image.react','LoadingMarker.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=248;i=babelHelpers.inherits(m,c('BUIComponent'));j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$BUIProgressBar2=function(){if(this.props.isBuffering)return c('React').createElement('div',{className:"__q3",style:{width:'100%'}});var s=this.props.percentage||0;if(s<0)s=0;if(s>100)s=100;return c('React').createElement('div',{className:"__q6"},c('React').createElement('div',{className:"__q7",style:{width:s+'%'}}));}.bind(this),this.$BUIProgressBar3=function(){if(this.props.flexibleWidth)return {width:'100%'};var s=+this.props.width;return {width:(s>l?l:s)+'px'};}.bind(this),o;}m.prototype.$BUIProgressBar1=function(){if(!this.props.icon&&!this.props.message)return null;var n;if(this.props.icon)n=c('React').createElement(c('Image.react'),{className:"__q1",src:this.props.icon});return c('React').createElement('div',{className:"__q2",'data-testid':this.props.dataTestId},n,this.props.message);};m.prototype.render=function(){var n=c('joinClasses')("__qa"+(this.props.isComplete===true?' '+"__qb":'')+(this.props.isError===true?' '+"__qc":'')+(this.props.height==='small'?' '+"_2tr-":'')+(this.props.color==='gray'?' '+"_2tr_":'')+(this.props.padding===true?' '+"_2m-z":''),this.props.className);return c('React').createElement(c('LoadingMarker.react'),null,c('React').createElement('div',{className:n,style:this.$BUIProgressBar3()},this.$BUIProgressBar2(),this.$BUIProgressBar1()));};m.propTypes={dataTestId:k.string,icon:k.object,isBuffering:k.bool,isError:k.bool,isSuccess:k.bool,message:k.node,percentage:k.number,height:k.oneOf(['small','medium']),width:k.number,color:k.oneOf(['gray','blue']),flexibleWidth:k.bool,padding:k.bool};m.defaultProps={isBuffering:false,isSuccess:false,isError:false,height:'medium',width:l,color:'blue',flexibleWidth:false,padding:true};f.exports=m;}),null);
__d('XUITypeaheadTextOnlyView.react',['cx','React','TypeaheadViewItem','TypeaheadViewPropTypes'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').createClass({displayName:'XUITypeaheadTextOnlyViewItem',mixins:[c('TypeaheadViewItem').Mixin],propTypes:c('TypeaheadViewItem').propTypes,render:function m(){var n=this.props.entry,o="_599m"+(this.props.highlighted?' '+"_599n":'');return c('React').createElement('li',{'aria-label':n.getTitle(),'aria-selected':this.props.highlighted,className:o,key:n.getUniqueID(),onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role,title:n.getTitle()},c('React').createElement('div',{className:"_599p"},n.getTitle()));}});i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$XUITypeaheadTextOnlyView1=function(r){var s=r===this.props.highlightedEntry;return c('React').createElement(k,{entry:r,highlighted:s,key:r.getUniqueID(),onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight});}.bind(this),n;}l.prototype.render=function(){'use strict';var m="_599r"+(!this.props.entries.length?' '+"_599s":'');return c('React').createElement('ul',{className:m,id:this.props.ariaOwneeID,role:this.props.role},this.props.entries.map(this.$XUITypeaheadTextOnlyView1));};l.propTypes=c('TypeaheadViewPropTypes');l.defaultProps={role:'listbox'};f.exports=l;}),null);
__d("DragDropFileUpload",[],(function a(b,c,d,e,f,g){g.isSupported=function(){return typeof FileList!=="undefined";};}),null);
__d('DocumentDragDrop',['Arbiter','CSS','DOMQuery','DragDropFileUpload','Event','emptyFunction','getObjectValues','getOrCreateDOMID'],(function a(b,c,d,e,f,g){var h={},i=0;function j(){i=0;c('getObjectValues')(h).forEach(function(o){c('CSS').removeClass(o.element,o.className);c('Arbiter').inform('dragleave',{element:o.element});});}var k=null;function l(){k&&clearTimeout(k);k=setTimeout(function(){j();},500);}var m=function o(){if(!c('DragDropFileUpload').isSupported())return;c('Event').listen(document,'dragenter',function(p){if(i===0)c('getObjectValues')(h).forEach(function(q){c('CSS').addClass(q.element,q.className);c('Arbiter').inform('dragenter',{element:q.element,event:p});});i++;l();});c('Event').listen(document,'dragleave',function(p){i--;if(i===0)j();l();});c('Event').listen(document,'drop',function(p){j();var q=p.getTarget();if(c('DOMQuery').isNodeOfType(p.getTarget(),'input'))if(q.type==='file')return;p.prevent();});c('Event').listen(document,'dragover',c('Event').prevent);document.addEventListener('dragover',l,true);m=c('emptyFunction');},n={init:function o(){m();},registerStatusElement:function o(p,q){m();h[c('getOrCreateDOMID')(p)]={element:p,className:q};if(i>0)c('CSS').addClass(p,q);},removeStatusElement:function o(p){var q=c('getOrCreateDOMID')(p),r=h[q];if(r){c('CSS').removeClass(r.element,r.className);delete h[q];}}};f.exports=n;}),null);
__d('PhotosMimeType',[],(function a(b,c,d,e,f,g){var h={isImage:function j(k){return i(k)[0]==='image';},isJpeg:function j(k){var l=i(k);return h.isImage(k)&&(l[1]==='jpeg'||l[1]==='pjpeg');}};function i(j){return j.split('/');}f.exports=h;}),null);
__d('DataTransfer',['PhotosMimeType','createArrayFromMixed','emptyFunction'],(function a(b,c,d,e,f,g){var h=new RegExp('\u000D\u000A','g'),i='\u000A',j={'text/rtf':1,'text/html':1};function k(m){if(m.kind=='file')return m.getAsFile();}function l(m){'use strict';this.data=m;this.types=m.types?c('createArrayFromMixed')(m.types):[];}l.prototype.isRichText=function(){'use strict';if(this.getHTML()&&this.getText())return true;if(this.isImage())return false;return this.types.some(function(m){return j[m];});};l.prototype.getText=function(){'use strict';var m;if(this.data.getData)if(!this.types.length){m=this.data.getData('Text');}else if(this.types.indexOf('text/plain')!=-1)m=this.data.getData('text/plain');return m?m.replace(h,i):null;};l.prototype.getHTML=function(){'use strict';if(this.data.getData)if(!this.types.length){return this.data.getData('Text');}else if(this.types.indexOf('text/html')!=-1)return this.data.getData('text/html');};l.prototype.isLink=function(){'use strict';return this.types.some(function(m){return m.indexOf('Url')!=-1||m.indexOf('text/uri-list')!=-1||m.indexOf('text/x-moz-url');});};l.prototype.getLink=function(){'use strict';if(this.data.getData){if(this.types.indexOf('text/x-moz-url')!=-1){var m=this.data.getData('text/x-moz-url').split('\n');return m[0];}return this.types.indexOf('text/uri-list')!=-1?this.data.getData('text/uri-list'):this.data.getData('url');}return null;};l.prototype.isImage=function(){'use strict';var m=this.types.some(function(q){return q.indexOf('application/x-moz-file')!=-1;});if(m)return true;var n=this.getFiles();for(var o=0;o<n.length;o++){var p=n[o].type;if(!c('PhotosMimeType').isImage(p))return false;}return true;};l.prototype.getCount=function(){'use strict';if(Object.prototype.hasOwnProperty.call(this.data,'items')){return this.data.items.length;}else if(Object.prototype.hasOwnProperty.call(this.data,'mozItemCount')){return this.data.mozItemCount;}else if(this.data.files)return this.data.files.length;return null;};l.prototype.getFiles=function(){'use strict';if(this.data.items){return Array.prototype.slice.call(this.data.items).map(k).filter(c('emptyFunction').thatReturnsArgument);}else if(this.data.files){return Array.prototype.slice.call(this.data.files);}else return [];};l.prototype.hasFiles=function(){'use strict';return this.getFiles().length>0;};f.exports=l;}),null);
__d('DragDropTarget',['Arbiter','Event','SubscriptionsHandler','CSS','DataTransfer','DocumentDragDrop','DragDropFileUpload','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){this._element=i;this._listeners=new (c('SubscriptionsHandler'))();this._statusElem=i;this._dragEnterCount=0;this._enabled=false;}Object.assign(h.prototype,{_onFilesDropCallback:c('emptyFunction'),_onURLDropCallback:c('emptyFunction'),_onPlainTextDropCallback:c('emptyFunction'),_onDropCallback:c('emptyFunction'),_fileFilterFn:c('emptyFunction').thatReturnsArgument,setOnDocumentDragEnterCallback:function i(j){this._onDocumentDragEnterCallback=j;return this;},setOnDocumentDragLeaveCallback:function i(j){this._onDocumentDragLeaveCallback=j;return this;},setOnDragEnterCallback:function i(j){this._onDragEnterCallback=j;return this;},setOnDragLeaveCallback:function i(j){this._onDragLeaveCallback=j;return this;},setOnFilesDropCallback:function i(j){this._onFilesDropCallback=j;return this;},setOnURLDropCallback:function i(j){this._onURLDropCallback=j;return this;},setOnPlainTextDropCallback:function i(j){this._onPlainTextDropCallback=j;return this;},setOnDropCallback:function i(j){this._onDropCallback=j;return this;},enable:function i(){if(!c('DragDropFileUpload').isSupported())return this;this._listeners.engage();c('DocumentDragDrop').registerStatusElement(this._statusElem,'fbWantsDragDrop');this._listeners.addSubscriptions(c('Event').listen(this._element,'dragenter',this._onDragEnter.bind(this)),c('Event').listen(this._element,'dragleave',this._onDragLeave.bind(this)),c('Event').listen(this._element,'dragover',this._onDragOver.bind(this)),c('Event').listen(this._element,'drop',function(j){this._dragEnterCount=0;c('CSS').removeClass(this._statusElem,'fbDropReady');c('CSS').removeClass(this._statusElem,'fbDropReadyPhoto');c('CSS').removeClass(this._statusElem,'fbDropReadyPhotos');c('CSS').removeClass(this._statusElem,'fbDropReadyLink');var k=new (c('DataTransfer'))(j.dataTransfer),l={},m=false,n=this._fileFilterFn(j.dataTransfer.files);if(n.length){this._onFilesDropCallback(n,j);l.files=n;m=true;}var o=k.getLink();if(o){this._onURLDropCallback(o,j);l.url=o;m=true;}var p=k.getText();if(p){this._onPlainTextDropCallback(p,j);l.plainText=p;m=true;}if(m)this._onDropCallback(l,j);j.kill();}.bind(this)));this._listeners.addSubscriptions(c('Arbiter').subscribe('dragenter',this._onDocumentDragEnter.bind(this)),c('Arbiter').subscribe('dragleave',this._onDocumentDragLeave.bind(this)));this._enabled=true;return this;},disable:function i(){if(!this._enabled)return this;c('DocumentDragDrop').removeStatusElement(this._statusElem,'fbWantsDragDrop');c('CSS').removeClass(this._statusElem,'fbDropReady');c('CSS').removeClass(this._statusElem,'fbDropReadyPhoto');c('CSS').removeClass(this._statusElem,'fbDropReadyPhotos');c('CSS').removeClass(this._statusElem,'fbDropReadyLink');this._listeners.release();this._enabled=false;return this;},setFileFilter:function i(j){this._fileFilterFn=j;return this;},setStatusElement:function i(j){this._statusElem=j;return this;},_onDragEnter:function i(j){if(this._dragEnterCount===0){var k=new (c('DataTransfer'))(j.dataTransfer);c('CSS').addClass(this._statusElem,'fbDropReady');if(k.isLink()||!k.isImage()){c('CSS').addClass(this._statusElem,'fbDropReadyLink');}else if(k.getCount()>1){c('CSS').addClass(this._statusElem,'fbDropReadyPhotos');}else c('CSS').addClass(this._statusElem,'fbDropReadyPhoto');this._onDragEnterCallback&&this._onDragEnterCallback();}this._dragEnterCount++;j.preventDefault();},_onDragLeave:function i(j){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0){c('CSS').removeClass(this._statusElem,'fbDropReady');c('CSS').removeClass(this._statusElem,'fbDropReadyPhoto');c('CSS').removeClass(this._statusElem,'fbDropReadyPhotos');c('CSS').removeClass(this._statusElem,'fbDropReadyLink');this._onDragLeaveCallback&&this._onDragLeaveCallback();}},_onDragOver:function i(j){if(!j.dataTransfer){c('Event').kill(j);return;}try{var k=j.dataTransfer.effectAllowed;j.dataTransfer.dropEffect=k=='move'||k=='linkMove'?'move':'copy';}catch(l){}c('Event').kill(j);},_onDocumentDragEnter:function i(event,j){if(this._onDocumentDragEnterCallback&&j.element==this._element)this._onDocumentDragEnterCallback();},_onDocumentDragLeave:function i(event,j){this._dragEnterCount=0;this._onDragLeave(event);if(this._onDocumentDragLeaveCallback&&j.element==this._element)this._onDocumentDragLeaveCallback();}});f.exports=h;}),null);
__d('BlobFactory',['emptyFunction'],(function a(b,c,d,e,f,g){var h=void 0,i=void 0;function j(){try{new b.Blob();i=true;}catch(l){i=false;}}var k=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder;if(b.Blob){h={getBlob:function l(m,n){m=m||[];n=n||{};if(i===undefined)j();if(i){return new b.Blob(m,n);}else{var o=new k();for(var p=0;p<m.length;p++)o.append(m[p]);return o.getBlob(n.type);}},isSupported:c('emptyFunction').thatReturnsTrue};}else h={getBlob:function l(){},isSupported:c('emptyFunction').thatReturnsFalse};f.exports=h;}),null);
__d('WebWorker',['invariant','BanzaiLogger','BlobFactory','EventListener','SubscriptionsHandler','URI','WebWorkerConfig','XHRRequest','areSameOrigin','arrayContains','destroyOnUnload','emptyFunction','filterObject','getCrossOriginTransport','memoize','performanceNow'],(function a(b,c,d,e,f,g,h){var i=b.URL||b.webkitURL;function j(p){'use strict';this.$WebWorker1=false;this.$WebWorker2=null;this.$WebWorker3=p;this.$WebWorker4=null;this.$WebWorker5=c('emptyFunction');this.$WebWorker6=c('emptyFunction');this.$WebWorker7=[];this.$WebWorker8=false;this.$WebWorker9=new (c('SubscriptionsHandler'))();c('destroyOnUnload')(function(){if(!this.$WebWorker8)this.terminate();}.bind(this));this.$WebWorker10('constructed');}j.prototype.setMessageHandler=function(p){'use strict';this.$WebWorker5=p||c('emptyFunction');return this;};j.prototype.setErrorHandler=function(p){'use strict';this.$WebWorker6=p||c('emptyFunction');return this;};j.prototype.postMessage=function(p,q){'use strict';!this.isCurrentState('constructed')||h(0);!this.isCurrentState('terminated')||h(0);if(this.isCurrentState('preparing')){this.$WebWorker7.push(this.postMessage.bind(this,p,q));return this;}var r={type:'message',message:p};if(q){this.$WebWorker4.postMessage(r,q);}else this.$WebWorker4.postMessage(r);return this;};j.prototype.terminate=function(){'use strict';if(this.isCurrentState('executing'))this.$WebWorker4.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker10('terminated');this.$WebWorker4=null;this.$WebWorker11();this.$WebWorker7=[];}return this;};j.prototype.execute=function(){'use strict';!this.isCurrentState('terminated')||h(0);if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker10('preparing');j.prepareResource(this.$WebWorker3,this.$WebWorker12.bind(this));return this;};j.prototype.setAllowCrossPageTransition=function(p){'use strict';this.$WebWorker8=p;return this;};j.prototype.isCurrentState=function(p){'use strict';c('arrayContains')(j.states,p)||h(0);return p===this.$WebWorker2;};j.prototype.$WebWorker12=function(){'use strict';!this.isCurrentState('executing')||h(0);if(this.isCurrentState('terminated'))return;this.$WebWorker3.sameOriginURL||this.$WebWorker3.source||h(0);if(this.$WebWorker3.sameOriginURL){this.$WebWorker4=new b.Worker(this.$WebWorker3.sameOriginURL);}else{this.$WebWorker4=new b.Worker(j.evalWorkerURL);this.$WebWorker4.postMessage(this.$WebWorker3.source);}this.$WebWorker13('ping',Date.now());if(this.$WebWorker3.dynamicModules)try{this.$WebWorker13('defineModules',this.$WebWorker3.dynamicModules);}catch(p){this.terminate();this.$WebWorker14('define_error',{message:p.message});throw p;}this.$WebWorker15();this.$WebWorker10('executing');this.$WebWorker7.forEach(function(p){return p();});this.$WebWorker7=null;};j.prototype.$WebWorker11=function(){'use strict';this.$WebWorker9.release();};j.prototype.$WebWorker13=function(p){for(var q=arguments.length,r=Array(q>1?q-1:0),s=1;s<q;s++)r[s-1]=arguments[s];'use strict';this.$WebWorker4.postMessage({type:p,args:r});};j.prototype.$WebWorker14=function(event,p){'use strict';j.$WebWorker14(event,this.$WebWorker3.name,babelHelpers['extends']({},p,{cross_page_transition:!!this.$WebWorker8,state:this.$WebWorker2}));};j.$WebWorker16=function(){'use strict';return Object.keys(c('filterObject')({object_url:j.$WebWorker17(),eval_url:n(),data_url:j.$WebWorker18(),worker:j.isSupported(),transferables:j.areTransferablesSupported()},function(p){return !!p;}));};j.prototype.$WebWorker15=function(){'use strict';this.$WebWorker9.addSubscriptions(c('EventListener').listen(this.$WebWorker4,'message',this.$WebWorker19.bind(this)),c('EventListener').listen(this.$WebWorker4,'error',this.$WebWorker20.bind(this)));};j.prototype.$WebWorker20=function(p){'use strict';var q=this.$WebWorker6(p);if(!q&&!p.defaultPrevented)this.$WebWorker14('exception',{message:p.message});};j.prototype.$WebWorker19=function(event){'use strict';var p=event.data;switch(p.type){case 'message':this.$WebWorker5(p.message);break;case 'pong':this.$WebWorker1=true;this.$WebWorker14('executed',{dt:Math.floor(p.args[1]-p.args[0]),bytes:this.$WebWorker3.source?this.$WebWorker3.source.length:-1});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorker14('haste_error',{message:p.message});break;case 'console':var q=p.args.shift();c('arrayContains')(['log','error','info','debug','warn'],q)||h(0);b.console[q].apply(b.console,p.args);break;}};j.prototype.$WebWorker10=function(p){'use strict';c('arrayContains')(j.states,p)||h(0);this.$WebWorker14('transition',{next_state:p});this.$WebWorker2=p;};j.prepareResource=function(p,q){'use strict';q=q||c('emptyFunction');p.sameOriginURL||p.url||p.source||h(0);!!j.isSupported()||h(0);if(p.sameOriginURL){q();}else if(p.url&&c('areSameOrigin')(new (c('URI'))(p.url),new (c('URI'))(b.location.href))){p.sameOriginURL=p.url;q();}else if(p.source){if(j.$WebWorker21())p.sameOriginURL=j.$WebWorker22(p.source);q();}else if(!p.loading){var r=c('performanceNow')();p.loading=[q];j.$WebWorker23(p.url,function(s){if(s){p.source=s;if(j.$WebWorker21())p.sameOriginURL=j.$WebWorker22(s);}j.$WebWorker14('prepared',p.name,{dt:Math.floor(c('performanceNow')()-r),bytes:s.length});p.loading.forEach(function(t){return t();});p.loading=false;});}else p.loading.push(q);return p;};j.releaseResource=function(p){'use strict';if(p.sameOriginURL.indexOf('blob:')===0){if(i.revokeObjectURL)i.revokeObjectURL(p.sameOriginURL);p.sameOriginURL=null;}return p;};j.isSupported=function(){'use strict';return m&&(j.$WebWorker21()||n());};j.areTransferablesSupported=function(){'use strict';return j.isSupported()&&o();};j.$WebWorker23=function(p,q){'use strict';new (c('XHRRequest'))(p).setTransportBuilder(c('getCrossOriginTransport')).setMethod('GET').setResponseHandler(function(r){q(r);}).setErrorHandler(q.bind(null,null)).send();};j.$WebWorker22=function(p){'use strict';j.$WebWorker21()||h(0);if(j.$WebWorker17()){var q=c('BlobFactory').getBlob([p],{type:'application/javascript'});return i.createObjectURL(q);}if(j.$WebWorker18())return 'data:application/javascript,'+encodeURIComponent(p);};j.$WebWorker17=function(){'use strict';return c('BlobFactory').isSupported()&&k();};j.$WebWorker18=function(){'use strict';return l();};j.$WebWorker21=function(){'use strict';return j.$WebWorker17()||j.$WebWorker18();};j.$WebWorker14=function(event,p,q){'use strict';if(!c('WebWorkerConfig').logging.enabled)return;c('BanzaiLogger').log(c('WebWorkerConfig').logging.config,babelHelpers['extends']({},q,{features_array:j.$WebWorker16(),event:event,resource:p}));};var k=c('memoize')(function(){var p,q;if(!i||!i.createObjectURL)return false;try{p=i.createObjectURL(c('BlobFactory').getBlob([''],{type:'application/javascript'}));var r=new b.Worker(p);r.terminate();q=true;}catch(s){q=false;}finally{if(i.revokeObjectURL)i.revokeObjectURL(p);}return q;}),l=c('memoize')(function(){var p;try{var q=new b.Worker('data:application/javascript,');q.terminate();p=true;}catch(r){p=false;}return p;}),m=!!b.Worker,n=c('memoize')(function(){var p;try{var q=new b.Worker(j.evalWorkerURL);q.terminate();p=true;}catch(r){p=false;}return p;}),o=c('memoize')(function(){var p;try{var q=new b.Worker(j.evalWorkerURL),r=new ArrayBuffer(0);q.postMessage({buffer:r},[r]);q.terminate();p=true;}catch(s){p=false;}return p;});j.states=['constructed','preparing','executing','terminated'];j.evalWorkerURL=c('WebWorkerConfig').evalWorkerURL;f.exports=j;}),null);
__d('fileSliceName',['UserAgent_DEPRECATED'],(function a(b,c,d,e,f,g){var h='slice',i;if(i=c('UserAgent_DEPRECATED').chrome()){if(i<21)h='webkitSlice';}else if(i=c('UserAgent_DEPRECATED').firefox()){if(i<13)h='mozSlice';}else if(!(i=c('UserAgent_DEPRECATED').safari()))if(c('UserAgent_DEPRECATED').webkit())h='webkitSlice';f.exports=h;}),null);
__d('FileHasher',['WebWorker','fileSliceName','emptyFunction','FileHashWorkerResource'],(function a(b,c,d,e,f,g){h.isSupported=function(){'use strict';return c('WebWorker').isSupported();};function h(){'use strict';var i=c('FileHashWorkerResource');c('WebWorker').prepareResource(i);this.$FileHasher1=new (c('WebWorker'))(i).setMessageHandler(function(j){this.$FileHasher2(j);}.bind(this)).execute();}h.prototype.hash=function(i,j){'use strict';this.$FileHasher2=j;this.$FileHasher1.postMessage({file:i,fileSliceName:c('fileSliceName')});return this;};h.prototype.destroy=function(){'use strict';this.$FileHasher2=c('emptyFunction');this.$FileHasher1.terminate();};f.exports=h;}),null);
__d('md5',['str2rstr'],(function a(b,c,d,e,f,g){function h(u,v){var w=u[0],x=u[1],y=u[2],z=u[3];w=j(w,x,y,z,v[0],7,-680876936);z=j(z,w,x,y,v[1],12,-389564586);y=j(y,z,w,x,v[2],17,606105819);x=j(x,y,z,w,v[3],22,-1044525330);w=j(w,x,y,z,v[4],7,-176418897);z=j(z,w,x,y,v[5],12,1200080426);y=j(y,z,w,x,v[6],17,-1473231341);x=j(x,y,z,w,v[7],22,-45705983);w=j(w,x,y,z,v[8],7,1770035416);z=j(z,w,x,y,v[9],12,-1958414417);y=j(y,z,w,x,v[10],17,-42063);x=j(x,y,z,w,v[11],22,-1990404162);w=j(w,x,y,z,v[12],7,1804603682);z=j(z,w,x,y,v[13],12,-40341101);y=j(y,z,w,x,v[14],17,-1502002290);x=j(x,y,z,w,v[15],22,1236535329);w=k(w,x,y,z,v[1],5,-165796510);z=k(z,w,x,y,v[6],9,-1069501632);y=k(y,z,w,x,v[11],14,643717713);x=k(x,y,z,w,v[0],20,-373897302);w=k(w,x,y,z,v[5],5,-701558691);z=k(z,w,x,y,v[10],9,38016083);y=k(y,z,w,x,v[15],14,-660478335);x=k(x,y,z,w,v[4],20,-405537848);w=k(w,x,y,z,v[9],5,568446438);z=k(z,w,x,y,v[14],9,-1019803690);y=k(y,z,w,x,v[3],14,-187363961);x=k(x,y,z,w,v[8],20,1163531501);w=k(w,x,y,z,v[13],5,-1444681467);z=k(z,w,x,y,v[2],9,-51403784);y=k(y,z,w,x,v[7],14,1735328473);x=k(x,y,z,w,v[12],20,-1926607734);w=l(w,x,y,z,v[5],4,-378558);z=l(z,w,x,y,v[8],11,-2022574463);y=l(y,z,w,x,v[11],16,1839030562);x=l(x,y,z,w,v[14],23,-35309556);w=l(w,x,y,z,v[1],4,-1530992060);z=l(z,w,x,y,v[4],11,1272893353);y=l(y,z,w,x,v[7],16,-155497632);x=l(x,y,z,w,v[10],23,-1094730640);w=l(w,x,y,z,v[13],4,681279174);z=l(z,w,x,y,v[0],11,-358537222);y=l(y,z,w,x,v[3],16,-722521979);x=l(x,y,z,w,v[6],23,76029189);w=l(w,x,y,z,v[9],4,-640364487);z=l(z,w,x,y,v[12],11,-421815835);y=l(y,z,w,x,v[15],16,530742520);x=l(x,y,z,w,v[2],23,-995338651);w=m(w,x,y,z,v[0],6,-198630844);z=m(z,w,x,y,v[7],10,1126891415);y=m(y,z,w,x,v[14],15,-1416354905);x=m(x,y,z,w,v[5],21,-57434055);w=m(w,x,y,z,v[12],6,1700485571);z=m(z,w,x,y,v[3],10,-1894986606);y=m(y,z,w,x,v[10],15,-1051523);x=m(x,y,z,w,v[1],21,-2054922799);w=m(w,x,y,z,v[8],6,1873313359);z=m(z,w,x,y,v[15],10,-30611744);y=m(y,z,w,x,v[6],15,-1560198380);x=m(x,y,z,w,v[13],21,1309151649);w=m(w,x,y,z,v[4],6,-145523070);z=m(z,w,x,y,v[11],10,-1120210379);y=m(y,z,w,x,v[2],15,718787259);x=m(x,y,z,w,v[9],21,-343485551);u[0]=s(w,u[0]);u[1]=s(x,u[1]);u[2]=s(y,u[2]);u[3]=s(z,u[3]);}function i(u,v,w,x,y,z){v=s(s(v,u),s(x,z));return s(v<<y|v>>>32-y,w);}function j(u,v,w,x,y,z,aa){return i(v&w|~v&x,u,v,y,z,aa);}function k(u,v,w,x,y,z,aa){return i(v&x|w&~x,u,v,y,z,aa);}function l(u,v,w,x,y,z,aa){return i(v^w^x,u,v,y,z,aa);}function m(u,v,w,x,y,z,aa){return i(w^(v|~x),u,v,y,z,aa);}function n(u){var v=u.length,w=[1732584193,-271733879,-1732584194,271733878],x;for(x=64;x<=u.length;x+=64)h(w,o(u.substring(x-64,x)));u=u.substring(x-64);var y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(x=0;x<u.length;x++)y[x>>2]|=u.charCodeAt(x)<<((x&3)<<3);y[x>>2]|=128<<((x&3)<<3);if(x>55){h(w,y);for(x=0;x<16;x++)y[x]=0;}y[14]=v*8;h(w,y);return w;}function o(u){var v=[],w=0;while(w<64)v[w>>2]=u.charCodeAt(w++)|u.charCodeAt(w++)<<8|u.charCodeAt(w++)<<16|u.charCodeAt(w++)<<24;return v;}var p='0123456789abcdef'.split('');function q(u){var v='',w=0;for(;w<4;w++)v+=p[u>>(w<<3)+4&15]+p[u>>(w<<3)&15];return v;}function r(u){for(var v=0;v<u.length;v++)u[v]=q(u[v]);return u.join('');}var s=function u(v,w){return v+w&4294967295;};function t(u){if(null===u||undefined===u){return null;}else{for(var v=0;v<u.length;v++)if(u[v]>"\u007F"){u=c('str2rstr')(u);break;}return r(n(u));}}if(t('hello')!='5d41402abc4b2a76b9719d911017c592')s=function u(v,w){var x=(v&65535)+(w&65535),y=(v>>16)+(w>>16)+(x>>16);return y<<16|x&65535;};f.exports=t;}),null);
__d('WaterfallIDGenerator',['CurrentUser','md5'],(function a(b,c,d,e,f,g){function h(){var k=2147483647;return Math.random()*k;}function i(){return Math.floor(Date.now()/1000);}var j={generate:function k(){return c('md5')([c('CurrentUser').getID(),i(),h()].join(':'));}};f.exports=j;}),null);
__d('ErrorDialog',['Dialog','emptyFunction'],(function a(b,c,d,e,f,g){var h={showAsyncError:function i(j){try{return h.show(j.getErrorSummary(),j.getErrorDescription());}catch(k){alert(j);}},show:function i(j,k,l,m){return new (c('Dialog'))().setTitle(j).setBody(k).setButtons([c('Dialog').OK]).setStackable(true).setModal(true).setHandler(l||c('emptyFunction')).setButtonsMessage(m||'').show();}};f.exports=h;}),null);
__d('URLScraper',['ArbiterMixin','DataStore','Event','URLMatcher','mixin'],(function a(b,c,d,e,f,g){var h,i,j='scraperLastPermissiveMatch';h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function k(l,m){'use strict';i.constructor.call(this);this.input=l;this.enable();this.getValueFn=m;}k.prototype.reset=function(){'use strict';c('DataStore').set(this.input,j,null);};k.prototype.enable=function(){'use strict';if(this.events)return;var l=function m(n){setTimeout(this.check.bind(this,n),30);};this.events=c('Event').listen(this.input,{paste:l.bind(this,false),keydown:l.bind(this,true)});};k.prototype.disable=function(){'use strict';if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;};k.prototype.check=function(l){'use strict';var m=this.getValueFn?this.getValueFn():this.input.value;if(l&&k.trigger(m))return;var n=k.match(m),o=c('URLMatcher').permissiveMatch(m);if(o&&o!=c('DataStore').get(this.input,j)){c('DataStore').set(this.input,j,o);this.inform('match',{url:n||o,alt_url:o});}};Object.assign(k,c('URLMatcher'));f.exports=k;}),null);
__d('fileSlice',['fileSliceName'],(function a(b,c,d,e,f,g){var h=b.File&&b.File.prototype[c('fileSliceName')];f.exports=h;}),null);
__d("isNumberLike",[],(function a(b,c,d,e,f,g){function h(i){return !isNaN(parseFloat(i))&&isFinite(i);}f.exports=h;}),null);
__d('submitForm',['DOM'],(function a(b,c,d,e,f,g){var h=function i(j){var k=c('DOM').scry(j,'input[type="submit"]')[0];if(k){k.click();}else{k=c('DOM').create('input',{type:'submit',className:'hidden_elem'});c('DOM').appendContent(j,k);k.click();c('DOM').remove(k);}};f.exports=h;}),null);
__d('PagesComposerActionsTypes',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({BACKDATE:null,SET_DRAFT:null,SCHEDULE:null,SET_ADS_POST:null,SET_BOOSTED_POST:null,SHOW_OFFER_UPSELL:null,ABANDON_OFFER_UPSELL:null,INSTAGRAM_CROSS_POSTING:null});f.exports=h;}),null);
__d("ManagedError",[],(function a(b,c,d,e,f,g){function h(i,j){Error.prototype.constructor.call(this,i);this.message=i;this.innerError=j;}h.prototype=new Error();h.prototype.constructor=h;f.exports=h;}),null);
__d('AssertionError',['ManagedError'],(function a(b,c,d,e,f,g){function h(i){c('ManagedError').prototype.constructor.apply(this,arguments);}h.prototype=new (c('ManagedError'))();h.prototype.constructor=h;f.exports=h;}),null);
__d('Assert',['AssertionError','sprintf'],(function a(b,c,d,e,f,g){function h(m,n){if(typeof m!=='boolean'||!m)throw new (c('AssertionError'))(n);return m;}function i(m,n,o){var p;if(n===undefined){p='undefined';}else if(n===null){p='null';}else{var q=Object.prototype.toString.call(n);p=/\s(\w*)/.exec(q)[1].toLowerCase();}h(m.indexOf(p)!==-1,o||c('sprintf')('Expression is of type %s, not %s',p,m));return n;}function j(m,n,o){h(n instanceof m,o||'Expression not instance of type');return n;}function k(m,n){l['is'+m]=n;l['maybe'+m]=function(o,p){if(o!=null)n(o,p);};}var l={isInstanceOf:j,isTrue:h,isTruthy:function m(n,o){return h(!!n,o);},type:i,define:function m(n,o){n=n.substring(0,1).toUpperCase()+n.substring(1).toLowerCase();k(n,function(p,q){h(o(p),q);});}};['Array','Boolean','Date','Function','Null','Number','Object','Regexp','String','Undefined'].forEach(function(m){k(m,i.bind(null,m.toLowerCase()));});f.exports=l;}),null);
__d("TypeaheadMetricCounter",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.reset();}h.prototype.reset=function(){"use strict";this.stats={};this.avgStats={};};h.prototype.recordStat=function(i,j){"use strict";this.stats[i]=j;};h.prototype.recordCountStat=function(i){"use strict";var j=this.stats[i];this.stats[i]=j?j+1:1;};h.prototype.recordAvgStat=function(i,j){"use strict";if(this.avgStats[i]){this.avgStats[i][0]+=j;this.avgStats[i][1]+=1;}else this.avgStats[i]=[j,1];};h.prototype.hasStats=function(){"use strict";return !!Object.keys(this.stats).length;};h.prototype.getStats=function(){"use strict";var i=babelHelpers["extends"]({},this.stats);for(var j in this.avgStats){var k=this.avgStats[j];i[j]=k[0]/k[1];}return i;};f.exports=h;}),null);
__d("QueriesHistory",[],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$QueriesHistory1=i;this.reset();}h.prototype.getQueries=function(){"use strict";return this.$QueriesHistory2;};h.prototype.getCurrentLength=function(){"use strict";return this.$QueriesHistory3;};h.prototype.add=function(i){"use strict";this.$QueriesHistory2.push(i);this.$QueriesHistory3+=i.length;while(this.$QueriesHistory2.length!==0&&this.$QueriesHistory3>this.$QueriesHistory1){var j=this.$QueriesHistory2.shift();this.$QueriesHistory3-=j.length;}};h.prototype.reset=function(){"use strict";this.$QueriesHistory3=0;this.$QueriesHistory2=[];};f.exports=h;}),null);
__d('TypeaheadMetricReporter',['AsyncRequest','QueriesHistory','TypeaheadMetricCounter','mixInEventEmitter'],(function a(b,c,d,e,f,g){var h='/ajax/typeahead/record_basic_metrics.php',i=1000;function j(k){'use strict';this.counter=new (c('TypeaheadMetricCounter'))();this.extraData=Object.assign({},k);this.bootstrapped=false;this.bootstrapBegin=Date.now();this.queriesHistory=new (c('QueriesHistory'))(i);this.lastQuery=null;this.sessionActive=false;this.lastNotBackspacedQuery='';this.lastRequestID=null;this.requestIDHistory=[];this.$TypeaheadMetricReporter1();}j.prototype.getSID=function(){'use strict';return this.sid;};j.prototype.sessionStart=function(){'use strict';this.sessionActive=true;this.sessionStartTime=Date.now();};j.prototype.sessionEnd=function(){'use strict';if(this.sessionActive){this.$TypeaheadMetricReporter2();this.$TypeaheadMetricReporter1();this.sessionActive=false;}};j.prototype.setAdditionalStats=function(k){'use strict';if(k)Object.entries(k).forEach(function(l){var m=l[0],n=l[1];this.counter.recordStat(m,n);}.bind(this));};j.prototype.sessionPause=function(k){'use strict';if(this.sessionActive){this.setAdditionalStats(k);this.$TypeaheadMetricReporter2();this.sessionActive=false;}};j.prototype.sessionDeactivate=function(){'use strict';this.sessionActive=false;};j.prototype.reportSelect=function(k,l,m,n,o,p){'use strict';o=o==null?this.lastQuery:o;this.counter.recordStat('selected_id',k||'SELECT_NULL');this.counter.recordStat('selected_type',l);this.counter.recordStat('selected_position',m);this.counter.recordStat('selected_with_mouse',n?1:0);this.counter.recordStat('selected_query',o);for(var q in p)this.counter.recordStat(q,p[q]);};j.prototype.reportStrategyName=function(k){'use strict';this.counter.recordStat('strategy_name',k);};j.prototype.reportBootstrapBegin=function(){'use strict';this.bootstrapBegin=Date.now();};j.prototype.reportBootstrapDirty=function(){'use strict';this.bootstrapped=false;};j.prototype.reportBootstrapComplete=function(k){'use strict';this.counter.recordAvgStat('bootstrap_latency',Date.now()-this.bootstrapBegin);var l={};k.forEach(function(m){l[m]=(l[m]||0)+1;});this.counter.recordStat('bootstrap_response_types',l);this.bootstrapped=true;};j.prototype.reportQueryBegin=function(k){'use strict';this.counter.recordStat('query',k);this.counter.recordCountStat('num_queries');this.queriesHistory.add(k);if(this.lastNotBackspacedQuery.indexOf(k)!==0)this.lastNotBackspacedQuery=k;this.lastQuery=k;this.lastQueryTime=Date.now();};j.prototype.reportRequestID=function(k){'use strict';this.lastRequestID=k;this.requestIDHistory.push(k);};j.prototype.reportQueryComplete=function(k,l){'use strict';this.counter.recordAvgStat('avg_query_latency',k);if(l!==undefined)this.counter.recordStat('filtered_count',l);};j.prototype.reportResults=function(k,l){'use strict';this.results=k;if(l===this.lastQuery)this.counter.recordStat('last_query_latency',Date.now()-this.lastQueryTime);};j.prototype.reportResultsAds=function(k){'use strict';this.resultsAds=k;};j.prototype.$TypeaheadMetricReporter1=function(){'use strict';this.sid=Math.floor(Date.now()*Math.random());this.lastNotBackspacedQuery='';this.queriesHistory.reset();this.results=null;this.resultsAds=null;this.lastRequestID=null;this.requestIDHistory=[];this.counter.reset();this.emit&&this.emit('reset',{sid:this.sid});};j.prototype.$TypeaheadMetricReporter3=function(){'use strict';var k={};for(var l in this.extraData){var m=this.extraData[l];k[l]=typeof m==='function'?m():m;}return k;};j.prototype.$TypeaheadMetricReporter2=function(){'use strict';if(this.counter.hasStats()){this.counter.recordStat('session_time',Date.now()-this.sessionStartTime);if(this.results)this.counter.recordStat('candidate_results',JSON.stringify(this.results));if(this.resultsAds)this.counter.recordStat('candidate_results_ads',JSON.stringify(this.resultsAds));if(this.sid)this.counter.recordStat('sid',this.sid);if(this.lastNotBackspacedQuery)this.counter.recordStat('last_not_backspaced_query',this.lastNotBackspacedQuery);this.counter.recordStat('queries_history',JSON.stringify(this.queriesHistory.getQueries()));if(this.bootstrapped)this.counter.recordStat('bootstrapped',1);if(this.lastRequestID)this.counter.recordStat('request_id',this.lastRequestID);if(this.requestIDHistory.length)this.counter.recordStat('request_ids',this.requestIDHistory);var k=babelHelpers['extends']({},this.counter.getStats(),this.$TypeaheadMetricReporter3());new (c('AsyncRequest'))().setURI(h).setMethod('POST').setData({stats:k}).send();this.emit&&this.emit('submitted',k);}};c('mixInEventEmitter')(j,{reset:true,submitted:true});f.exports=j;}),null);
__d('VideoUploadLogger',['Banzai'],(function a(b,c,d,e,f,g){function h(i){this._source=i.source;this._waterfallID=i.waterfall_id;this._targetID=i.target_id;this._delay=i.delay;this._times=[];this._isChunkedUpload=i.is_chunked_upload;this._actorID=i.actor_id;this._composerEntryPointRef=i.composer_entry_point_ref;this._isRemoteUpload=i.is_remote_upload;this._containerType=i.container_type;}Object.assign(h,{BANZAI_GK:'videos',BANZAI_ROUTE:'video_waterfall',SOURCE_SIMPLE:'simple',SOURCE_COMPOSER:'composer',EVENT_STARTED_GENERATE_THUMBNAILS:'upload.client.started_generate_thumbnails',EVENT_FINISHED_GENERATE_THUMBNAILS:'upload.client.finished_generate_thumbnails',EVENT_SELECTED_CUSTOM_THUMBNAIL:'upload.client.selected_custom_thumbnail',EVENT_VIDEO_DIMENSIONS_UNREADABLE:'upload.client.video_dimensions_unreadable',EVENT_REPLACE_VIDEO:'upload.client.replace_video',EVENT_STARTED_FLOW:'upload.client.started_flow',EVENT_FINISHED_FLOW:'upload.client.finished_flow',EVENT_FAILED_FLOW:'upload.client.failed_flow',EVENT_CANCELED_FLOW:'upload.client.canceled_flow',EVENT_RESIGNED_FLOW:'upload.client.resigned_flow',EVENT_REQUESTED_UPLOADING:'upload.client.requested_uploading',EVENT_INVALIDATED_UPLOADING:'upload.client.invalidated_uploading',EVENT_STARTED_UPLOADING:'upload.client.started_uploading',EVENT_PROGRESS_UPLOADING_START_REQUEST:'upload.client.progress_uploading_start_request',EVENT_FINISHED_UPLOADING:'upload.client.finished_uploading',EVENT_CANCELED_UPLOADING:'upload.client.canceled_uploading',EVENT_ABANDONED_UPLOADING:'upload.client.abandoned_uploading',EVENT_FAILED_UPLOADING:'upload.client.failed_uploading',EVENT_STARTED_SENDING_BYTES:'upload.client.started_sending_bytes',EVENT_FINISHED_SENDING_BYTES:'upload.client.finished_sending_bytes',EVENT_CANCELED_SENDING_BYTES:'upload.client.canceled_sending_bytes',EVENT_FAILED_SENDING_BYTES:'upload.client.failed_sending_bytes',EVENT_STARTED_START_REQUEST:'upload.client.started_sending_start_request',EVENT_FINISHED_START_REQUEST:'upload.client.finished_sending_start_request',EVENT_FAILED_START_REQUEST:'upload.client.failed_sending_start_request',EVENT_STARTED_POST_REQUEST:'upload.client.started_sending_post_request',EVENT_FINISHED_POST_REQUEST:'upload.client.finished_sending_post_request',EVENT_FAILED_POST_REQUEST:'upload.client.failed_sending_post_request',EVENT_STARTED_SENDING_CHUNK_BYTES:'upload.client.started_sending_chunk_bytes',EVENT_FINISHED_SENDING_CHUNK_BYTES:'upload.client.finished_sending_chunk_bytes',EVENT_CANCELED_SENDING_CHUNK_BYTES:'upload.client.canceled_sending_chunk_bytes',EVENT_FAILED_SENDING_CHUNK_BYTES:'upload.client.failed_sending_chunk_bytes',EVENT_TIMEOUT_SENDING_CHUNK_BYTES:'upload.client.timeout_sending_chunk_bytes',EVENT_ENCODING_START_OBSERVED:'encode.client.encoding_start_observed',EVENT_ENCODING_SUCCESS_OBSERVED:'encode.client.encoding_success_observed',EVENT_ENCODING_FAIL_OBSERVED:'encode.client.encoding_fail_observed',EVENT_RECEIVED_RESPONSE:'upload.client.received_response',EVENT_STARTED_FLOW_EXP1:'upload.client.started_flow_exp1',EVENT_FINISHED_FLOW_EXP1:'upload.client.finished_flow_exp1',EVENT_CANCELED_FLOW_EXP1:'upload.client.canceled_flow_exp1'});Object.assign(h.prototype,{logEvent:function i(event,j){var k=babelHelpers['extends']({},j);if(k.elapsed_time==null)if(event.indexOf('started')!==-1){this._times[event]=Date.now();}else if(event.indexOf('finished')!==-1){k.elapsed_time=this._computeElapsedTime(event,'finished');}else if(event.indexOf('canceled')!==-1){k.elapsed_time=this._computeElapsedTime(event,'canceled');}else if(event.indexOf('failed')!==-1)k.elapsed_time=this._computeElapsedTime(event,'failed');k.event=event;k.source=this._source;k.waterfall_id=this._waterfallID;k.target_id=this._targetID;k.is_chunked_upload=this._isChunkedUpload;k.actor_id=this._actorID;k.composer_entry_point_ref=this._composerEntryPointRef;k.is_remote_upload=this._isRemoteUpload;k.container_type=this._containerType;c('Banzai').post(h.BANZAI_ROUTE,k,{delay:this._delay,retry:true});},_computeElapsedTime:function i(event,j){var k=event.replace(j,'started'),l=this._times[k];return l?Date.now()-l:null;}});f.exports=h;}),null);
__d('VideoUploadSphericalLogger',['Banzai'],(function a(b,c,d,e,f,g){var h=3000;function i(){'use strict';this.$VideoUploadSphericalLogger1={};this.$VideoUploadSphericalLogger2=false;this.$VideoUploadSphericalLogger3=0;}i.prototype.log=function(){'use strict';this.$VideoUploadSphericalLogger2?this.$VideoUploadSphericalLogger4():this.$VideoUploadSphericalLogger5();};i.prototype.$VideoUploadSphericalLogger5=function(){'use strict';c('Banzai').post('spherical_video_composer_upload',babelHelpers['extends']({},this.$VideoUploadSphericalLogger1));};i.prototype.$VideoUploadSphericalLogger4=function(){'use strict';var j=Date.now();if(j-this.$VideoUploadSphericalLogger3>h){this.$VideoUploadSphericalLogger3=j;this.$VideoUploadSphericalLogger5();}};i.prototype.setDirectorsCutEnabled=function(j){'use strict';this.$VideoUploadSphericalLogger1.directors_cut_enabled=j;return this;};i.prototype.setFieldOfView=function(j){'use strict';this.$VideoUploadSphericalLogger1.field_of_view=j;return this;};i.prototype.setFileExtension=function(j){'use strict';this.$VideoUploadSphericalLogger1.file_extension=j;return this;};i.prototype.setHasSphericalMetadata=function(j){'use strict';this.$VideoUploadSphericalLogger1.has_spherical_metadata=j;return this;};i.prototype.setPitchDegrees=function(j){'use strict';this.$VideoUploadSphericalLogger1.pitch_degrees=j;return this;};i.prototype.setTargetID=function(j){'use strict';this.$VideoUploadSphericalLogger1.target_id=j;return this;};i.prototype.setVideoID=function(j){'use strict';this.$VideoUploadSphericalLogger1.video_id=j;return this;};i.prototype.setUserAction=function(j){'use strict';this.$VideoUploadSphericalLogger1.user_action=j;if(j==='drag_video_preview'||j==='scroll_video_preview'){this.$VideoUploadSphericalLogger2=true;}else this.$VideoUploadSphericalLogger2=false;return this;};i.prototype.setVideoPreviewPosition=function(j){'use strict';this.$VideoUploadSphericalLogger1.video_preview_position=j;return this;};i.prototype.setYawDegrees=function(j){'use strict';this.$VideoUploadSphericalLogger1.yaw_degrees=j;return this;};i.prototype.setIsRedesign=function(j){'use strict';this.$VideoUploadSphericalLogger1.is_redesign=j;return this;};i.prototype.setFinalGuideEnabled=function(j){'use strict';this.$VideoUploadSphericalLogger1.final_guide_enabled=j;return this;};i.prototype.setFinalNumGuidePoints=function(j){'use strict';this.$VideoUploadSphericalLogger1.final_num_guide_points=j;return this;};i.prototype.setIsNuxTest=function(j){'use strict';this.$VideoUploadSphericalLogger1.is_nux_test=j;return this;};f.exports=new i();}),null);
__d('VideoUploadCrashMonitor',['Bandicoot','VideoUploadLogger'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('Bandicoot'));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r){'use strict';i.constructor.call(this,'VideoUploadSession');this.$VideoUploadCrashMonitor1={waterfallID:k,actorID:l,source:m,targetID:n,loggingDelay:o,supportsChunking:p,composerEntryPointRef:q,flowStarted:r};}j.prototype.flowStarted=function(){'use strict';this.$VideoUploadCrashMonitor1.flowStarted=true;};j.prototype.getCrashTimeData=function(){'use strict';return this.$VideoUploadCrashMonitor1;};j.prototype.logCrash=function(k,l,m){'use strict';if(!l.waterfallID)return;var n=new (c('VideoUploadLogger'))({actor_id:l.actorID,source:l.source,waterfall_id:l.waterfallID,target_id:l.targetID,delay:l.loggingDelay,is_chunked_upload:l.supportsChunking,composer_entry_point_ref:l.composerEntryPointRef}),o={error:'Crash Detected',error_description:'Detected video upload did not complete due to a crash'};n.logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,o);if(l.flowStarted)n.logEvent(c('VideoUploadLogger').EVENT_RESIGNED_FLOW,{});};f.exports=j;}),null);
__d('VideoUploadFeatureDetector',['UserAgent_DEPRECATED','fileSlice'],(function a(b,c,d,e,f,g){var h={supportsChunking:function i(){return typeof c('fileSlice')==='function'&&this.supportsXHR();},supportsFullProgress:function i(){return !c('UserAgent_DEPRECATED').firefox();},supportsFileAPI:function i(){return 'FileList' in window;},supportsFileReading:function i(){return 'FileReader' in window&&'DataView' in window;},supportsXHR:function i(){return 'FormData' in window;}};f.exports=h;}),null);
__d('VideoUploadFile',['fileSlice','ImageExtensions','VideoCreatorProductType','VideoUploadFeatureDetector'],(function a(b,c,d,e,f,g){function h(i,j,k,l){'use strict';this.$VideoUploadFile1=i;this.$VideoUploadFile2=j;this.$VideoUploadFile3=k;this.$VideoUploadFile4=l;}h.fromFile=function(i){'use strict';var j=h.getExtensionFromFileName(i.name);return new this(null,i,i.size,j);};h.fromFileInput=function(i){'use strict';var j=null,k=null,l=h.getExtensionFromFileInput(i);if(c('VideoUploadFeatureDetector').supportsFileAPI()&&i.files.length){j=i.files[0];k=j.size;}return new this(i,j,k,l);};h.prototype.getFileInput=function(){'use strict';return this.$VideoUploadFile1;};h.prototype.getFile=function(){'use strict';return this.$VideoUploadFile2;};h.prototype.getSize=function(){'use strict';return this.$VideoUploadFile3;};h.prototype.getExtension=function(){'use strict';return this.$VideoUploadFile4;};h.prototype.getCreatorProduct=function(){'use strict';if(this.$VideoUploadFile4===c('ImageExtensions').GIF)return c('VideoCreatorProductType').ANIMATED_GIFS;return c('VideoCreatorProductType').CORE_VIDEOS;};h.prototype.getChunk=function(i,j){'use strict';return this.$VideoUploadFile2?c('fileSlice').call(this.$VideoUploadFile2,i,j):null;};h.getExtensionFromFileInput=function(i){'use strict';return this.getExtensionFromFileName(i.value);};h.getExtensionFromFileName=function(i){'use strict';return i.indexOf('.')!=-1?i.split('.').pop().toLowerCase():'';};f.exports=h;}),null);
__d('VideoUploadFileValidator',['errorCode','fbt','ErrorDialog','ImageExtensions','Link.react','React'],(function a(b,c,d,e,f,g,h,i){var j=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],k=['VIDEO__INVALID_GUIDE_DATA'];function l(m){'use strict';this.$VideoUploadFileValidator1=m;}l.prototype.validate=function(m,n){'use strict';return this.$VideoUploadFileValidator2(m)&&this.$VideoUploadFileValidator3(m)&&this.$VideoUploadFileValidator4(m.getExtension()===c('ImageExtensions').GIF,n);};l.prototype.getValidationErrorMessage=function(m,n){'use strict';return this.$VideoUploadFileValidator5(m)||this.$VideoUploadFileValidator6(m)||this.$VideoUploadFileValidator7(m.getExtension()===c('ImageExtensions').GIF,n);};l.canReplaceVideoForError=function(m){'use strict';if(!m)return true;if(k.indexOf(m)>-1)return false;if(j.indexOf(m)>-1)return true;return false;};l.prototype.$VideoUploadFileValidator2=function(m){'use strict';var n=this.$VideoUploadFileValidator5(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false;}else return true;};l.prototype.$VideoUploadFileValidator5=function(m){'use strict';if(this.$VideoUploadFileValidator1.extensions[m.getExtension()])return;var n="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",o=c('React').createElement(c('Link.react'),{href:n},i._("recommended formats"));return {summary:i._("Unsupported File Format"),description:i._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[i.param('link',o)])};};l.prototype.$VideoUploadFileValidator3=function(m){'use strict';var n=this.$VideoUploadFileValidator6(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false;}else return true;};l.prototype.$VideoUploadFileValidator6=function(m){'use strict';var n;if(m.getSize()===null)return;if(m.getSize()<this.$VideoUploadFileValidator1.minSize)n=this.$VideoUploadFileValidator8();if(m.getSize()>this.$VideoUploadFileValidator1.maxSize)n=this.$VideoUploadFileValidator9();return n;};l.prototype.$VideoUploadFileValidator8=function(){'use strict';var m=Math.round(this.$VideoUploadFileValidator1.minSize/1024);return {summary:i._("Video File Too Small"),description:i._("The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[i.param('min-size',m)])};};l.prototype.$VideoUploadFileValidator9=function(){'use strict';var m=this.$VideoUploadFileValidator1.maxSize/1024/1024;return {summary:i._("Video File Too Large"),description:i._("The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[i.param('max-size',m)])};};l.prototype.$VideoUploadFileValidator4=function(m,n){'use strict';var o=this.$VideoUploadFileValidator7(m,n);if(o){c('ErrorDialog').show(o.summary,o.description);return false;}else return true;};l.prototype.$VideoUploadFileValidator7=function(m,n){'use strict';var o;if(!n)return;var p=n.format.duration;if(p>this.$VideoUploadFileValidator1.maxLength)o=this.$VideoUploadFileValidator10();if(p<this.$VideoUploadFileValidator1.minLength&&!m)o=this.$VideoUploadFileValidator11();if(!n.streams.primaryVideo&&n.streams.primaryAudio)o=this.$VideoUploadFileValidator12();if(n.streams.primaryVideo.width<this.$VideoUploadFileValidator1.minWidth)o=this.$VideoUploadFileValidator13();if(n.streams.primaryVideo.height<this.$VideoUploadFileValidator1.minHeight)o=this.$VideoUploadFileValidator14();var q=n.streams.primaryVideo.width/n.streams.primaryVideo.height;if(this.$VideoUploadFileValidator1.require16to9AspectRatio)if(q>2||q<1.6)o=this.$VideoUploadFileValidator15();if(this.$VideoUploadFileValidator1.minAspectRatio)if(q<this.$VideoUploadFileValidator1.minAspectRatio)o=this.$VideoUploadFileValidator16();if(this.$VideoUploadFileValidator1.maxAspectRatio)if(q>this.$VideoUploadFileValidator1.maxAspectRatio)o=this.$VideoUploadFileValidator17();return o;};l.prototype.$VideoUploadFileValidator10=function(){'use strict';if(this.$VideoUploadFileValidator1.source==='profile_video'){return {summary:i._("Profile Video Duration Too Long"),description:i._("The maximum length is {max-length} seconds. Please upload a shorter video.",[i.param('max-length',this.$VideoUploadFileValidator1.maxLength)])};}else return {summary:i._("Video Duration Too Long"),description:i._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[i.param('max-length',Math.round(this.$VideoUploadFileValidator1.maxLength/60))])};};l.prototype.$VideoUploadFileValidator11=function(){'use strict';return {summary:i._("Video File Too Short"),description:i._({"second":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.","seconds":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video."},[i.param('min-length',this.$VideoUploadFileValidator1.minLength),i['enum'](this.$VideoUploadFileValidator1.minLength===1?'second':'seconds',{second:'second',seconds:'seconds'})])};};l.prototype.$VideoUploadFileValidator12=function(){'use strict';var m="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",n=c('React').createElement(c('Link.react'),{href:m},i._("supported video format"));return {summary:i._("No Video Detected"),description:i._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[i.param('supported-video-format link',n)])};};l.prototype.$VideoUploadFileValidator13=function(){'use strict';return {summary:i._("Video Width Too Narrow"),description:i._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[i.param('min-width',this.$VideoUploadFileValidator1.minWidth)])};};l.prototype.$VideoUploadFileValidator15=function(){'use strict';return {summary:i._("Problem Uploading Video"),description:i._("Videos look best when they have a 16:9 aspect ratio. Please edit your video and upload again.")};};l.prototype.$VideoUploadFileValidator14=function(){'use strict';return {summary:i._("Video Height Too Short"),description:i._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[i.param('min-height',this.$VideoUploadFileValidator1.minHeight)])};};l.prototype.$VideoUploadFileValidator17=function(){'use strict';return {summary:i._("Aspect Ratio Too Big"),description:i._("The video you selected is too wide. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}.",[i.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),i.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])};};l.prototype.$VideoUploadFileValidator16=function(){'use strict';return {summary:i._("Aspect Ratio Too low"),description:i._("The video you selected is too tall. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}.",[i.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),i.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])};};f.exports=l;}),null);
__d('VideoUploadProgressBar',['cx','CSS','VideoUploadFeatureDetector'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.$VideoUploadProgressBar1=j.progress_bar;this.$VideoUploadProgressBar2=j.throbber;this.$VideoUploadProgressBar3=j.uploader;this.$VideoUploadProgressBar4=j.start_margin;this.$VideoUploadProgressBar5=j.start_delay;this.$VideoUploadProgressBar6=j.end_margin;this.$VideoUploadProgressBar7=j.end_delay;this.$VideoUploadProgressBar8=j.progress_bar_label;this.$VideoUploadProgressBar9();}i.prototype.reset=function(){'use strict';this.$VideoUploadProgressBar1.setPosition(0);};i.prototype.getRoot=function(){'use strict';return this.$VideoUploadProgressBar1.getRoot();};i.computeProgress=function(j,k,l,m,n){'use strict';var o=Math.min(j+k,l);return o/l*(100-m-n)+m;};i.prototype.$VideoUploadProgressBar9=function(){'use strict';if(c('VideoUploadFeatureDetector').supportsFileAPI()){this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar10.bind(this));this.$VideoUploadProgressBar3.subscribe('upload-progressed',this.$VideoUploadProgressBar11.bind(this));this.$VideoUploadProgressBar3.subscribe('online',this.$VideoUploadProgressBar12.bind(this));this.$VideoUploadProgressBar3.subscribe('offline',this.$VideoUploadProgressBar13.bind(this));}else this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar14.bind(this));};i.prototype.$VideoUploadProgressBar10=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar1.getRoot());c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");this.$VideoUploadProgressBar1.setTarget(this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar5);this.$VideoUploadProgressBar15(0);};i.prototype.$VideoUploadProgressBar15=function(j){'use strict';if(this.$VideoUploadProgressBar8)this.$VideoUploadProgressBar1.changeLabel(''+j.toFixed(1)+'%');};i.prototype.$VideoUploadProgressBar11=function(event,j){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");var k=i.computeProgress(j.start_offset,j.sent_bytes,j.file_size,this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar6);this.$VideoUploadProgressBar1.setPosition(k);this.$VideoUploadProgressBar15(k);if(k>=100-this.$VideoUploadProgressBar6){this.$VideoUploadProgressBar1.setTarget(100,this.$VideoUploadProgressBar7);this.$VideoUploadProgressBar15(100);}};i.prototype.$VideoUploadProgressBar12=function(event){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");};i.prototype.$VideoUploadProgressBar13=function(event){'use strict';c('CSS').addClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");};i.prototype.$VideoUploadProgressBar14=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar2);};f.exports=i;}),null);
__d('VideoUploadRequest',['AsyncRequest','DOM','DTSG','FileForm','Form','PHPQuerySerializer','VideoUploadFeatureDetector','emptyFunction','flattenPHPQueryData','submitForm'],(function a(b,c,d,e,f,g){var h='video';function i(j){'use strict';this.$VideoUploadRequest1=j;this.$VideoUploadRequest2=null;this.$VideoUploadRequest3=false;this.$VideoUploadRequest4=null;this.$VideoUploadRequest5=null;this.$VideoUploadRequest6=null;this.$VideoUploadRequest7=null;this.$VideoUploadRequest8=c('emptyFunction');this.$VideoUploadRequest9=c('emptyFunction');this.$VideoUploadRequest10=c('emptyFunction');this.$VideoUploadRequest11=c('emptyFunction');this.$VideoUploadRequest12=null;}i.prototype.setAllowCrossOrigin=function(j){'use strict';this.$VideoUploadRequest3=j;return this;};i.prototype.setData=function(j){'use strict';this.$VideoUploadRequest4=j;return this;};i.prototype.setWaterfallID=function(j){'use strict';this.$VideoUploadRequest6=j;return this;};i.prototype.setSuccessHandler=function(j){'use strict';this.$VideoUploadRequest8=j;return this;};i.prototype.setErrorHandler=function(j){'use strict';this.$VideoUploadRequest9=j;return this;};i.prototype.setTransportErrorHandler=function(j){'use strict';this.$VideoUploadRequest10=j;return this;};i.prototype.setUploadProgressHandler=function(j){'use strict';this.$VideoUploadRequest11=j;return this;};i.prototype.setTimeoutHandler=function(j,k){'use strict';this.$VideoUploadRequest7=j;this.$VideoUploadRequest12=k;return this;};i.prototype.setThumbnail=function(j){'use strict';this.$VideoUploadRequest13=j;return this;};i.prototype.setHandle=function(j){'use strict';this.$VideoUploadRequest5=j;return this;};i.prototype.setCaptions=function(j){'use strict';this.$VideoUploadRequest14=j;return this;};i.prototype.send=function(){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');if(c('VideoUploadFeatureDetector').supportsXHR()){this.$VideoUploadRequest2=this.$VideoUploadRequest15();if(this.$VideoUploadRequest13||this.$VideoUploadRequest14){var j=new FormData();if(this.$VideoUploadRequest13)j.append('thumb',this.$VideoUploadRequest13);if(this.$VideoUploadRequest14)this.$VideoUploadRequest14.forEach(function(l,m){var n=l.getIsDefault()?'captions_default':'captions_file'+m;j.append(n,l.getFile());});if(this.$VideoUploadRequest4){var k=c('flattenPHPQueryData')(this.$VideoUploadRequest4);Object.keys(k).forEach(function(l){j.append(l,k[l]);});}this.$VideoUploadRequest2.setRawData(j);}this.$VideoUploadRequest2.send();}else{this.$VideoUploadRequest2=this.$VideoUploadRequest16();this.$VideoUploadRequest17(this.$VideoUploadRequest2);}};i.prototype.sendChunk=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');var k=new FormData();if(this.$VideoUploadRequest5){k.append('fbuploader_video_file_chunk',this.$VideoUploadRequest5);}else k.append('video_file_chunk',j);this.$VideoUploadRequest2=this.$VideoUploadRequest15();this.$VideoUploadRequest2.setRawData(k);this.$VideoUploadRequest2.send();};i.prototype.sendFile=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');this.$VideoUploadRequest2=this.$VideoUploadRequest16();var k=j.cloneNode(false);j.name=h;c('DOM').replace(j,k);c('DOM').appendContent(this.$VideoUploadRequest2.getRoot(),j);this.$VideoUploadRequest17(this.$VideoUploadRequest2);j.name=k.name;c('DOM').replace(k,j);};i.prototype.abort=function(){'use strict';if(!this.$VideoUploadRequest2)throw new Error('There is no upload request in progress.');this.$VideoUploadRequest2.abort();this.$VideoUploadRequest2=null;};i.prototype.$VideoUploadRequest15=function(){'use strict';var j=this.__getAsyncRequest().setAllowCrossOrigin(this.$VideoUploadRequest3).setURI(this.$VideoUploadRequest1).setData(this.$VideoUploadRequest4).setRequestHeader('X_FB_VIDEO_WATERFALL_ID',this.$VideoUploadRequest6).setHandler(this.$VideoUploadRequest8).setErrorHandler(this.$VideoUploadRequest9).setTransportErrorHandler(this.$VideoUploadRequest10).setUploadProgressHandler(this.$VideoUploadRequest11);if(this.$VideoUploadRequest12)j.setTimeoutHandler(this.$VideoUploadRequest7,this.$VideoUploadRequest12);return j;};i.prototype.__getAsyncRequest=function(){'use strict';return new (c('AsyncRequest'))();};i.prototype.$VideoUploadRequest16=function(){'use strict';var j=c('DOM').create('form',{action:this.$VideoUploadRequest1,method:'POST'});c('Form').createHiddenInputs(babelHelpers['extends']({fb_dtsg:c('DTSG').getToken()},this.$VideoUploadRequest4),j);var k=new (c('FileForm'))(j,null,{allowCrossOrigin:this.$VideoUploadRequest3});k.subscribe('success',this.$VideoUploadRequest18.bind(this));k.subscribe('failure',this.$VideoUploadRequest19.bind(this));k.subscribe('progress',this.$VideoUploadRequest20.bind(this));return k;};i.prototype.$VideoUploadRequest17=function(j){'use strict';c('DOM').appendContent(document.body,j.getRoot());c('submitForm')(j.getRoot());};i.prototype.$VideoUploadRequest18=function(event,j){'use strict';this.$VideoUploadRequest8(j.response);};i.prototype.$VideoUploadRequest19=function(event,j){'use strict';this.$VideoUploadRequest9(j.response);};i.prototype.$VideoUploadRequest20=function(event,j){'use strict';this.$VideoUploadRequest11(j.event);};f.exports=i;}),null);
__d("VideoUploadRequestContext",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.reset();}h.prototype.setFile=function(i){"use strict";this.$VideoUploadRequestContext1=i;return this;};h.prototype.getFile=function(){"use strict";return this.$VideoUploadRequestContext1;};h.prototype.setMetadata=function(i){"use strict";this.$VideoUploadRequestContext2=i;return this;};h.prototype.getMetadata=function(){"use strict";return this.$VideoUploadRequestContext2;};h.prototype.setVideoID=function(i){"use strict";this.$VideoUploadRequestContext3=i;return this;};h.prototype.getVideoID=function(){"use strict";return this.$VideoUploadRequestContext3;};h.prototype.setStartOffset=function(i){"use strict";this.$VideoUploadRequestContext4=i;return this;};h.prototype.getStartOffset=function(){"use strict";return this.$VideoUploadRequestContext4;};h.prototype.setEndOffset=function(i){"use strict";this.$VideoUploadRequestContext5=i;return this;};h.prototype.getEndOffset=function(){"use strict";return this.$VideoUploadRequestContext5;};h.prototype.setPartitionStartOffset=function(i){"use strict";this.$VideoUploadRequestContext6=i;return this;};h.prototype.getPartitionStartOffset=function(){"use strict";return this.$VideoUploadRequestContext6;};h.prototype.setPartitionEndOffset=function(i){"use strict";this.$VideoUploadRequestContext7=i;return this;};h.prototype.getPartitionEndOffset=function(){"use strict";return this.$VideoUploadRequestContext7;};h.prototype.setTargetID=function(i){"use strict";this.$VideoUploadRequestContext8=i;return this;};h.prototype.getTargetID=function(){"use strict";return this.$VideoUploadRequestContext8;};h.prototype.setSource=function(i){"use strict";this.$VideoUploadRequestContext9=i;return this;};h.prototype.getSource=function(){"use strict";return this.$VideoUploadRequestContext9;};h.prototype.setWaterfallID=function(i){"use strict";this.$VideoUploadRequestContext10=i;return this;};h.prototype.getWaterfallID=function(){"use strict";return this.$VideoUploadRequestContext10;};h.prototype.setComposerEntryPointRef=function(i){"use strict";this.$VideoUploadRequestContext11=i;};h.prototype.getComposerEntryPointRef=function(){"use strict";return this.$VideoUploadRequestContext11;};h.prototype.setSupportsChunking=function(i){"use strict";this.$VideoUploadRequestContext12=i;return this;};h.prototype.getSupportsChunking=function(){"use strict";return this.$VideoUploadRequestContext12;};h.prototype.setSupportsFileAPI=function(i){"use strict";this.$VideoUploadRequestContext13=i;return this;};h.prototype.getSupportsFileAPI=function(){"use strict";return this.$VideoUploadRequestContext13;};h.prototype.setCreatorProduct=function(i){"use strict";this.$VideoUploadRequestContext14=i;return this;};h.prototype.getCreatorProduct=function(){"use strict";return this.$VideoUploadRequestContext14;};h.prototype.setLastKnownUploadSpeed=function(i){"use strict";this.$VideoUploadRequestContext15=i;};h.prototype.getLastKnownUploadSpeed=function(){"use strict";return this.$VideoUploadRequestContext15||0;};h.prototype.setUseParallelChunks=function(i){"use strict";this.$VideoUploadRequestContext16=i;};h.prototype.getUseParallelChunks=function(){"use strict";return this.$VideoUploadRequestContext16;};h.prototype.setIsSphericalVideo=function(i){"use strict";this.$VideoUploadRequestContext17=i;};h.prototype.getIsSphericalVideo=function(){"use strict";return this.$VideoUploadRequestContext17;};h.prototype.setSphericalMetadata=function(i){"use strict";this.$VideoUploadRequestContext18=i;};h.prototype.getSphericalMetadata=function(){"use strict";return this.$VideoUploadRequestContext18;};h.prototype.setEnableOmnistab=function(i){"use strict";this.$VideoUploadRequestContext19=i;};h.prototype.getEnableOmnistab=function(){"use strict";return this.$VideoUploadRequestContext19;};h.prototype.reset=function(){"use strict";this.$VideoUploadRequestContext1=null;this.$VideoUploadRequestContext3=null;this.$VideoUploadRequestContext4=null;this.$VideoUploadRequestContext5=null;this.$VideoUploadRequestContext8=null;this.$VideoUploadRequestContext9=null;this.$VideoUploadRequestContext10=null;this.$VideoUploadRequestContext11=null;this.$VideoUploadRequestContext12=null;this.$VideoUploadRequestContext13=null;this.$VideoUploadRequestContext6=null;this.$VideoUploadRequestContext7=null;this.$VideoUploadRequestContext14=null;this.$VideoUploadRequestContext15=0;this.$VideoUploadRequestContext16=false;this.$VideoUploadRequestContext17=false;this.$VideoUploadRequestContext2={};this.$VideoUploadRequestContext18={};this.$VideoUploadRequestContext19=false;};f.exports=h;}),null);
__d('VideoUploadPostRequestManager',['ArbiterMixin','VideoUploadRequest','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this);this.$VideoUploadPostRequestManager1=k;this.$VideoUploadPostRequestManager2=l;this.$VideoUploadPostRequestManager3=m;this.$VideoUploadPostRequestManager4=0;this.$VideoUploadPostRequestManager5=n;this.$VideoUploadPostRequestManager6=o;this.$VideoUploadPostRequestManager7=0;}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadPostRequestManager8;};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadPostRequestManager8)return;this.$VideoUploadPostRequestManager9=babelHelpers['extends']({},k.getMetadata(),this.__createRequestData(k));this.$VideoUploadPostRequestManager10=this.$VideoUploadPostRequestManager9.thumb;delete this.$VideoUploadPostRequestManager9.thumb;this.$VideoUploadPostRequestManager11=this.$VideoUploadPostRequestManager9.captions;delete this.$VideoUploadPostRequestManager9.captions;this.$VideoUploadPostRequestManager12=k.getWaterfallID();this.$VideoUploadPostRequestManager13();this.inform('request-started');};j.prototype.$VideoUploadPostRequestManager13=function(){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=null;this.$VideoUploadPostRequestManager8=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager1).setAllowCrossOrigin(true).setData(this.$VideoUploadPostRequestManager9).setThumbnail(this.$VideoUploadPostRequestManager10).setCaptions(this.$VideoUploadPostRequestManager11).setWaterfallID(this.$VideoUploadPostRequestManager12).setSuccessHandler(this.$VideoUploadPostRequestManager15.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager16.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager17.bind(this));this.$VideoUploadPostRequestManager8.send();};j.prototype.__createRequestData=function(k){'use strict';return {video_id:k.getVideoID(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),creator_product:k.getCreatorProduct(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking()};};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k);};j.prototype.clearRequest=function(){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager7=0;this.$VideoUploadPostRequestManager4=0;};j.prototype.isInProgress=function(){'use strict';return !!this.$VideoUploadPostRequestManager8;};j.prototype.$VideoUploadPostRequestManager18=function(k){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=setTimeout(this.$VideoUploadPostRequestManager13.bind(this),k);};j.prototype.$VideoUploadPostRequestManager19=function(k,l){'use strict';return Math.pow(k,l)*1000;};j.prototype.$VideoUploadPostRequestManager15=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',{video_id:l.video_id,video_asset_id:l.video_asset_id,container_type:l.container_type,transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7});this.clearRequest();};j.prototype.$VideoUploadPostRequestManager20=function(k){'use strict';this.inform('request-failed',{error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7,error_is_transient:k.isTransient()});this.clearRequest();};j.prototype.$VideoUploadPostRequestManager16=function(k){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager4=0;if(k.isTransient()&&this.$VideoUploadPostRequestManager7<this.$VideoUploadPostRequestManager5){this.$VideoUploadPostRequestManager7++;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager6,this.$VideoUploadPostRequestManager7));}else this.$VideoUploadPostRequestManager20(k);};j.prototype.$VideoUploadPostRequestManager17=function(k){'use strict';if(this.$VideoUploadPostRequestManager2===0||this.$VideoUploadPostRequestManager4>=this.$VideoUploadPostRequestManager2){this.$VideoUploadPostRequestManager20(k);}else{this.$VideoUploadPostRequestManager4++;this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager3,this.$VideoUploadPostRequestManager4));}};f.exports=j;}),null);
__d('VideoUploadConnectionMonitor',['ArbiterMixin','Network','VideoUploadFeatureDetector','debounce','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$VideoUploadConnectionMonitor1=false;this.$VideoUploadConnectionMonitor2=[];this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor4=true;this.$VideoUploadConnectionMonitor5=c('debounce')(function(){this.$VideoUploadConnectionMonitor6(false);}.bind(this),2000);}j.prototype.notifyStart=function(){'use strict';if(this.$VideoUploadConnectionMonitor3)return;if(this.$VideoUploadConnectionMonitor2.length===0){this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('online',function(){this.$VideoUploadConnectionMonitor6(true);}.bind(this)));this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('offline',function(){if(this.$VideoUploadConnectionMonitor1){this.$VideoUploadConnectionMonitor5();}else{this.$VideoUploadConnectionMonitor5.reset();setTimeout(this.$VideoUploadConnectionMonitor5,2000);}}.bind(this)));}this.$VideoUploadConnectionMonitor3=true;};j.prototype.notifyProgress=function(event){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;if(!event)return;if(c('VideoUploadFeatureDetector').supportsFullProgress()){this.$VideoUploadConnectionMonitor1=true;if(event.total&&event.loaded===event.total){this.$VideoUploadConnectionMonitor5.reset();}else this.$VideoUploadConnectionMonitor5();}};j.prototype.notifySuccess=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true);};j.prototype.notifyTransportError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor6(false);};j.prototype.notifyError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true);};j.prototype.isOnline=function(){'use strict';return this.$VideoUploadConnectionMonitor4;};j.prototype.reset=function(){'use strict';while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=false;};j.prototype.$VideoUploadConnectionMonitor6=function(k){'use strict';this.$VideoUploadConnectionMonitor5.reset();if(this.$VideoUploadConnectionMonitor4!==k){this.$VideoUploadConnectionMonitor4=k;if(this.$VideoUploadConnectionMonitor4){this.inform('online');}else this.inform('offline');}};f.exports=j;}),null);
__d('VideoUploadReceiveRequestManager',['fbt','ArbiterMixin','VideoUploadConnectionMonitor','VideoUploadRequest','VideoUploadConfig','ResumableUploadService','ResumableUploadServiceState.enum','md5','mixin'],(function a(b,c,d,e,f,g,h){var i,j,k=1363037;i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function l(m,n,o,p,q,r,s,t,u){'use strict';j.constructor.call(this);this.$VideoUploadReceiveRequestManager1=m;this.$VideoUploadReceiveRequestManager2=n;this.$VideoUploadReceiveRequestManager3=o;this.$VideoUploadReceiveRequestManager4=p;this.$VideoUploadReceiveRequestManager5=q;this.$VideoUploadReceiveRequestManager6=r;this.$VideoUploadReceiveRequestManager7=s;this.$VideoUploadReceiveRequestManager8=t;this.$VideoUploadReceiveRequestManager9=u;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager16='constructed';this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager18=new (c('VideoUploadConnectionMonitor'))();this.$VideoUploadReceiveRequestManager18.subscribe('online',this.$VideoUploadReceiveRequestManager19.bind(this));this.$VideoUploadReceiveRequestManager18.subscribe('offline',this.$VideoUploadReceiveRequestManager20.bind(this));}l.prototype.sendRequest=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='sending request';if(this.$VideoUploadReceiveRequestManager21){this.$VideoUploadReceiveRequestManager16='request already in progress';return;}this.$VideoUploadReceiveRequestManager15=m.getEndOffset()-m.getStartOffset();this.$VideoUploadReceiveRequestManager22=m;this.$VideoUploadReceiveRequestManager23();};l.prototype.cancelRequest=function(){'use strict';if(!this.$VideoUploadReceiveRequestManager21)return;this.$VideoUploadReceiveRequestManager21.abort();if(this.$VideoUploadReceiveRequestManager17!==null)this.$VideoUploadReceiveRequestManager17.cancel();this.$VideoUploadReceiveRequestManager24();};l.prototype.appendStateLogData=function(m,n){'use strict';m[n+'last_log_entry']=this.$VideoUploadReceiveRequestManager16;m[n+'upload_speed']=this.$VideoUploadReceiveRequestManager14;m[n+'transport_retries']=this.$VideoUploadReceiveRequestManager10;m[n+'server_retries']=this.$VideoUploadReceiveRequestManager11;m[n+'timeout_retries']=this.$VideoUploadReceiveRequestManager12;m[n+'last_timeout_value']=this.$VideoUploadReceiveRequestManager25;m[n+'last_request_start_time']=this.$VideoUploadReceiveRequestManager13;m[n+'pending_request']=this.$VideoUploadReceiveRequestManager21!=null;m[n+'pending_timer']=this.$VideoUploadReceiveRequestManager26!=null;m[n+'cached_chunk']=this.$VideoUploadReceiveRequestManager27!=null;if(this.$VideoUploadReceiveRequestManager22!=null){m[n+'start_offset']=this.$VideoUploadReceiveRequestManager22.getStartOffset();m[n+'end_offset']=this.$VideoUploadReceiveRequestManager22.getEndOffset();m[n+'partition_start_offset']=this.$VideoUploadReceiveRequestManager22.getPartitionStartOffset();m[n+'partition_end_offset']=this.$VideoUploadReceiveRequestManager22.getPartitionEndOffset();}if(this.$VideoUploadReceiveRequestManager18!=null)m[n+'connection_monitor_online']=this.$VideoUploadReceiveRequestManager18.isOnline();};l.prototype.$VideoUploadReceiveRequestManager24=function(){'use strict';this.$VideoUploadReceiveRequestManager21=null;this.$VideoUploadReceiveRequestManager27=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager22.reset();this.$VideoUploadReceiveRequestManager18.reset();clearTimeout(this.$VideoUploadReceiveRequestManager26);this.$VideoUploadReceiveRequestManager26=null;};l.prototype.$VideoUploadReceiveRequestManager23=function(m){'use strict';clearTimeout(this.$VideoUploadReceiveRequestManager26);this.$VideoUploadReceiveRequestManager26=null;if(this.$VideoUploadReceiveRequestManager22.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager22.getStartOffset()>=this.$VideoUploadReceiveRequestManager22.getPartitionEndOffset()){if(!m){this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager22.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager22.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager16='request finished - notified';}else this.$VideoUploadReceiveRequestManager16='request finished - not notified';return;}this.$VideoUploadReceiveRequestManager21=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(true).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager22)).setWaterfallID(this.$VideoUploadReceiveRequestManager22.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager28.bind(this));if(!c('VideoUploadConfig').resumability_enabled)this.$VideoUploadReceiveRequestManager21.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager29.bind(this));this.$VideoUploadReceiveRequestManager13=Date.now();if(this.$VideoUploadReceiveRequestManager22.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager4){var n=this.$VideoUploadReceiveRequestManager30(this.$VideoUploadReceiveRequestManager22.getEndOffset()-this.$VideoUploadReceiveRequestManager22.getStartOffset(),this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager21.setTimeoutHandler(n,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager16='sending chunk with timeout = '+n;this.$VideoUploadReceiveRequestManager25=n;}else this.$VideoUploadReceiveRequestManager16='sending chunk without timeout';var o=this.$VideoUploadReceiveRequestManager31();if(c('VideoUploadConfig').resumability_enabled){this.$VideoUploadReceiveRequestManager32(o);}else this.$VideoUploadReceiveRequestManager21.sendChunk(o);}else{this.$VideoUploadReceiveRequestManager16='sending file';this.$VideoUploadReceiveRequestManager21.sendFile(this.$VideoUploadReceiveRequestManager22.getFile().getFileInput());}this.$VideoUploadReceiveRequestManager18.notifyStart();this.inform('request-started',{start_offset:this.$VideoUploadReceiveRequestManager22.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager22.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});};l.prototype.$VideoUploadReceiveRequestManager32=function(m){'use strict';var n=this.$VideoUploadReceiveRequestManager22.getFile(),o=c('md5')(n.getFile().lastModified+n.getFile().name+n.getFile().type+this.$VideoUploadReceiveRequestManager22.getWaterfallID())+'-'+this.$VideoUploadReceiveRequestManager22.getStartOffset()+'-'+this.$VideoUploadReceiveRequestManager22.getEndOffset();this.$VideoUploadReceiveRequestManager17=new (c('ResumableUploadService'))('fb_video',c('VideoUploadConfig').access_token,o,null,null);this.$VideoUploadReceiveRequestManager33();this.$VideoUploadReceiveRequestManager17.resume(m);};l.prototype.$VideoUploadReceiveRequestManager33=function(){'use strict';this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').FAIL,function(m){this.__handleServerFailureResponse(m);}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').SUCCESS,function(m){this.$VideoUploadReceiveRequestManager21.setHandle(m);this.$VideoUploadReceiveRequestManager21.sendChunk(null);}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').TRANSPORT_FAILURE,function(m){this.$VideoUploadReceiveRequestManager28(m);}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').PROGRESS,function(event){this.$VideoUploadReceiveRequestManager29(event);}.bind(this));};l.prototype.__getVideoUploadRequest=function(m){'use strict';return new (c('VideoUploadRequest'))(m);};l.prototype.$VideoUploadReceiveRequestManager34=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='setting request to send after'+m;clearTimeout(this.$VideoUploadReceiveRequestManager26);this.$VideoUploadReceiveRequestManager26=setTimeout(this.$VideoUploadReceiveRequestManager23.bind(this),m);};l.prototype.$VideoUploadReceiveRequestManager31=function(){'use strict';if(this.$VideoUploadReceiveRequestManager27)return this.$VideoUploadReceiveRequestManager27;if(c('VideoUploadConfig').resumability_enabled){this.$VideoUploadReceiveRequestManager27=this.$VideoUploadReceiveRequestManager22.getFile().getFile().slice(this.$VideoUploadReceiveRequestManager22.getStartOffset(),this.$VideoUploadReceiveRequestManager22.getEndOffset(),'application/octet-stream');}else this.$VideoUploadReceiveRequestManager27=this.$VideoUploadReceiveRequestManager22.getFile().getChunk(this.$VideoUploadReceiveRequestManager22.getStartOffset(),this.$VideoUploadReceiveRequestManager22.getEndOffset());return this.$VideoUploadReceiveRequestManager27;};l.prototype.__createRequestData=function(m){'use strict';return {video_id:m.getVideoID(),start_offset:m.getStartOffset(),source:m.getSource(),target_id:m.getTargetID(),waterfall_id:m.getWaterfallID(),composer_entry_point_ref:m.getComposerEntryPointRef&&m.getComposerEntryPointRef(),supports_chunking:m.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager14,partition_start_offset:m.getPartitionStartOffset(),partition_end_offset:m.getPartitionEndOffset()};};l.prototype.__handleSuccessResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='success response received';var n=Date.now()-this.$VideoUploadReceiveRequestManager13;n=n===0?1:n;var o=m.getPayload();if(o.start_offset===this.$VideoUploadReceiveRequestManager22.getEndOffset()){var p=this.$VideoUploadReceiveRequestManager22.getEndOffset()-this.$VideoUploadReceiveRequestManager22.getStartOffset();this.$VideoUploadReceiveRequestManager14=Math.floor(p/n);}else this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager18.notifySuccess();this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager22.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager22.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager22.setStartOffset(o.start_offset);this.$VideoUploadReceiveRequestManager22.setEndOffset(o.end_offset);this.$VideoUploadReceiveRequestManager22.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager21=null;this.$VideoUploadReceiveRequestManager27=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager22.getSupportsChunking())this.$VideoUploadReceiveRequestManager23(true);};l.prototype.__handleServerFailureResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='failure response received';this.$VideoUploadReceiveRequestManager21=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager18.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(m.getError())){this.$VideoUploadReceiveRequestManager11++;var n=m.getPayload();this.$VideoUploadReceiveRequestManager16='invalid offset response received start='+n.start_offset+' end='+n.end_offset;if(this.$VideoUploadReceiveRequestManager22.getStartOffset()!=n.start_offset||this.$VideoUploadReceiveRequestManager22.getEndOffset()!=n.end_offset){this.$VideoUploadReceiveRequestManager22.setStartOffset(n.start_offset);this.$VideoUploadReceiveRequestManager22.setEndOffset(n.end_offset);this.$VideoUploadReceiveRequestManager27=null;}this.$VideoUploadReceiveRequestManager23();}else if((m.isTransient()||this.$VideoUploadReceiveRequestManager9)&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3){this.$VideoUploadReceiveRequestManager16='transient server error';this.$VideoUploadReceiveRequestManager11++;this.$VideoUploadReceiveRequestManager34(this.$VideoUploadReceiveRequestManager35(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11));}else this.$VideoUploadReceiveRequestManager36(m);};l.prototype.__handleResponseTimeout=function(m){'use strict';this.inform('request-timeout',{start_offset:this.$VideoUploadReceiveRequestManager22.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager22.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,timeout_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager21.abort();this.$VideoUploadReceiveRequestManager21=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager18.notifyTransportError();if(++this.$VideoUploadReceiveRequestManager12<=this.$VideoUploadReceiveRequestManager5){var n=this.$VideoUploadReceiveRequestManager22.getEndOffset()-this.$VideoUploadReceiveRequestManager22.getStartOffset();n=Math.floor(n/2);n=Math.max(n,this.$VideoUploadReceiveRequestManager15);var o=this.$VideoUploadReceiveRequestManager22.getEndOffset();o=Math.min(o,this.$VideoUploadReceiveRequestManager22.getStartOffset()+n);this.$VideoUploadReceiveRequestManager22.setEndOffset(o);this.$VideoUploadReceiveRequestManager27=null;this.$VideoUploadReceiveRequestManager16='resending after timeout with chunksize='+n;this.$VideoUploadReceiveRequestManager23();}else this.$VideoUploadReceiveRequestManager37({error_code:1006,error_description:h._("Your browser appears to be offline. Please check your internet connection and try again."),error_summary:h._("No Network Connection"),error_is_transient:true});};l.prototype.__hasInvalidStartOffsetAndHasRetries=function(m){'use strict';return m===k&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3;};l.prototype.$VideoUploadReceiveRequestManager28=function(m){'use strict';this.$VideoUploadReceiveRequestManager18.notifyTransportError();this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager10<this.$VideoUploadReceiveRequestManager2){this.$VideoUploadReceiveRequestManager16='resending after transport failure';this.$VideoUploadReceiveRequestManager10++;this.$VideoUploadReceiveRequestManager21=null;this.$VideoUploadReceiveRequestManager34(this.$VideoUploadReceiveRequestManager35(this.$VideoUploadReceiveRequestManager7,this.$VideoUploadReceiveRequestManager10));}else this.$VideoUploadReceiveRequestManager36(m);};l.prototype.$VideoUploadReceiveRequestManager36=function(m){'use strict';this.$VideoUploadReceiveRequestManager37({error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()});};l.prototype.$VideoUploadReceiveRequestManager37=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='handling failure error';this.inform('request-failed',m);this.$VideoUploadReceiveRequestManager24();};l.prototype.$VideoUploadReceiveRequestManager29=function(event){'use strict';this.$VideoUploadReceiveRequestManager18.notifyProgress(event);this.inform('request-progressed',{file_size:this.$VideoUploadReceiveRequestManager22.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager22.getStartOffset(),sent_bytes:event.loaded});};l.prototype.$VideoUploadReceiveRequestManager19=function(event){'use strict';this.inform('online');this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager26)this.$VideoUploadReceiveRequestManager23();};l.prototype.$VideoUploadReceiveRequestManager20=function(event){'use strict';this.inform('offline');};l.prototype.$VideoUploadReceiveRequestManager35=function(m,n){'use strict';return Math.pow(m,n)*1000;};l.prototype.$VideoUploadReceiveRequestManager30=function(m,n){'use strict';var o;if(n>0){o=n;}else o=10;var p=Math.floor(m/o*this.$VideoUploadReceiveRequestManager6/100);return Math.max(p,30000);};f.exports=l;}),null);
__d('VideoUploadStartRequestManager',['ArbiterMixin','VideoUploadRequest','FileHasher','performanceNow','mixin','Assert'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o,p,q){'use strict';i.constructor.call(this);this.$VideoUploadStartRequestManager1=k;this.$VideoUploadStartRequestManager2=l;this.$VideoUploadStartRequestManager3=m;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager5=n;this.$VideoUploadStartRequestManager6=o;this.$VideoUploadStartRequestManager7=p;this.$VideoUploadStartRequestManager8=q;this.$VideoUploadStartRequestManager9=0;}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadStartRequestManager10;};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadStartRequestManager11||this.$VideoUploadStartRequestManager10)return;this.$VideoUploadStartRequestManager12=k;if(this.$VideoUploadStartRequestManager5&&this.$VideoUploadStartRequestManager12.getFile().getFile()&&this.$VideoUploadStartRequestManager12.getFile().getFile().size<this.$VideoUploadStartRequestManager6&&c('FileHasher').isSupported()){this.$VideoUploadStartRequestManager13=c('performanceNow')();this.$VideoUploadStartRequestManager11=new (c('FileHasher'))();this.$VideoUploadStartRequestManager11.hash(this.$VideoUploadStartRequestManager12.getFile().getFile(),function(l){this.$VideoUploadStartRequestManager13=c('performanceNow')()-this.$VideoUploadStartRequestManager13;this.$VideoUploadStartRequestManager14=l.hash;this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;if(!l.hash)this.$VideoUploadStartRequestManager15=l.exception;this.$VideoUploadStartRequestManager16();}.bind(this));}else this.$VideoUploadStartRequestManager16();};j.prototype.$VideoUploadStartRequestManager16=function(){'use strict';this.$VideoUploadStartRequestManager17();this.inform('request-started',{hash_time:this.$VideoUploadStartRequestManager13,hash_exception:this.$VideoUploadStartRequestManager15});};j.prototype.$VideoUploadStartRequestManager17=function(){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;this.$VideoUploadStartRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(true).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager12,this.$VideoUploadStartRequestManager14)).setWaterfallID(this.$VideoUploadStartRequestManager12.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager19.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager20.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager21.bind(this));this.$VideoUploadStartRequestManager10.send();};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k);};j.prototype.__getDataToSend=function(k,l){'use strict';return {file_size:k.getFile().getSize(),file_extension:k.getFile().getExtension(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking(),supports_file_api:k.getSupportsFileAPI(),partition_start_offset:k.getPartitionStartOffset(),partition_end_offset:k.getPartitionEndOffset(),creator_product:k.getCreatorProduct(),original_file_hash:l,spherical:k.getIsSphericalVideo(),spherical_metadata:k.getSphericalMetadata()};};j.prototype.cancelRequest=function(){'use strict';this.$VideoUploadStartRequestManager22();};j.prototype.$VideoUploadStartRequestManager23=function(k){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=setTimeout(this.$VideoUploadStartRequestManager17.bind(this),k);};j.prototype.$VideoUploadStartRequestManager22=function(){'use strict';if(this.$VideoUploadStartRequestManager11){this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;}if(this.$VideoUploadStartRequestManager10){this.$VideoUploadStartRequestManager10.abort();this.$VideoUploadStartRequestManager10=null;}this.$VideoUploadStartRequestManager9=0;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager12=null;clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;};j.prototype.$VideoUploadStartRequestManager24=function(k,l){'use strict';return Math.pow(k,l)*1000;};j.prototype.$VideoUploadStartRequestManager19=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',this.__getSuccessInformData(l));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.');};j.prototype.__getSuccessInformData=function(k){'use strict';return {video_id:k.video_id,start_offset:k.start_offset,end_offset:k.end_offset,transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,skip_upload:k.skip_upload,hash_time:this.$VideoUploadStartRequestManager13};};j.prototype.$VideoUploadStartRequestManager25=function(k){'use strict';this.inform('request-failed',this.$VideoUploadStartRequestManager26(k));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.');};j.prototype.$VideoUploadStartRequestManager20=function(k){'use strict';this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager4=0;if(k.isTransient()&&this.$VideoUploadStartRequestManager9<this.$VideoUploadStartRequestManager7){this.$VideoUploadStartRequestManager9++;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager8,this.$VideoUploadStartRequestManager9));}else this.$VideoUploadStartRequestManager25(k);};j.prototype.$VideoUploadStartRequestManager21=function(k){'use strict';if(this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager4>=this.$VideoUploadStartRequestManager2){this.$VideoUploadStartRequestManager25(k);}else{this.$VideoUploadStartRequestManager4++;this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager4));}};j.prototype.$VideoUploadStartRequestManager26=function(k){'use strict';return {error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,error_is_transient:k.isTransient()};};f.exports=j;}),null);
__d('getVideo64BitAtomLength',['Int64'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=i.getUint32(j+l+k),n=i.getUint32(j+k+l+l);return new (c('Int64'))(n,m).toNumber();}f.exports=h;}),null);
__d('VideoUploadMetadataParser',['regeneratorRuntime','Promise','VideoUploadFeatureDetector','VideoUploadSphericalLogger','fileSlice','getVideo64BitAtomLength'],(function a(b,c,d,e,f,g){var h=4,i=4,j=5242880,k=24,l=88,m=20,n=16,o=4,p=84,q=20,r=62,s=4,t=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],u=12,v=12,w=16,x=36,y=1,z=1,aa=4,ba=1,ca=1,da=4,ea=4;function fa(ga,ha){'use strict';this.$VideoUploadMetadataParser1=ga;this.$VideoUploadMetadataParser2=ha;}fa.prototype.getHandler=function(){'use strict';return this.$VideoUploadMetadataParser2;};fa.prototype.parse=function(){'use strict';if(!c('VideoUploadFeatureDetector').supportsFileReading()){this.$VideoUploadMetadataParser2(null);return null;}switch(this.$VideoUploadMetadataParser1.getExtension()){case 'mp4':case 'mov':case 'm4v':case '3gp':case '3g2':c('VideoUploadSphericalLogger').setFileExtension(this.$VideoUploadMetadataParser1.getExtension());break;default:this.$VideoUploadMetadataParser2(null);return null;}return this.$VideoUploadMetadataParser3(0,Math.min(j,this.$VideoUploadMetadataParser1.getSize()),null);};fa.prototype.$VideoUploadMetadataParser3=function ga(ha,ia,ja){var ka,la;return c('regeneratorRuntime').async(function ma(na){while(1)switch(na.prev=na.next){case 0:'use strict';ka=new FileReader();la=new (c('Promise'))(function(oa,pa){ka.onload=function ra(event){var sa;return c('regeneratorRuntime').async(function ta(ua){while(1)switch(ua.prev=ua.next){case 0:ua.prev=0;sa=this.$VideoUploadMetadataParser4(new DataView(ka.result),0,ia-ha,ha,ja);if(!sa.completed){ua.next=8;break;}sa=this.$VideoUploadMetadataParser5(sa);this.$VideoUploadMetadataParser2(sa);oa(sa);ua.next=12;break;case 8:ua.next=10;return c('regeneratorRuntime').awrap(this.$VideoUploadMetadataParser3(ha+sa.nextOffset,Math.min(this.$VideoUploadMetadataParser1.getSize(),ha+sa.nextOffset+j),sa));case 10:sa=ua.sent;oa(sa);case 12:ua.next=18;break;case 14:ua.prev=14;ua.t0=ua['catch'](0);this.$VideoUploadMetadataParser2(null);pa(ua.t0);case 18:case 'end':return ua.stop();}},null,this,[[0,14]]);}.bind(this);var qa=this.$VideoUploadMetadataParser1.getFile();ka.readAsArrayBuffer(c('fileSlice').call(qa,ha,ia));}.bind(this));return na.abrupt('return',la);case 4:case 'end':return na.stop();}},null,this);};fa.prototype.$VideoUploadMetadataParser6=function(ga,ha,ia){'use strict';var ja=[];for(var ka=0;ka<ia;ka++)ja.push(String.fromCharCode(ga.getUint8(ha+ka)));return ja.join('');};fa.prototype.$VideoUploadMetadataParser7=function(ga,ha,ia){'use strict';var ja={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_maps:[]},ka=0;ja.version=ga.getUint8(ha+ka);ka=y;ja.ambisonic_type=ga.getUint8(ha+ka);ka+=z;ja.ambisonic_order=ga.getUint32(ha+ka);ka+=aa;ja.ambisonic_channel_ordering=ga.getUint8(ha+ka);ka+=ba;ja.ambisonic_normalization=ga.getUint8(ha+ka);ka+=ca;ja.num_channels=ga.getUint32(ha+ka);ka+=da;for(var la=0;la<ja.num_channels;la++){ja.channel_maps.push(ga.getUint32(ha+ka));ka+=ea;if(ka>ia)return null;}return JSON.stringify(ja);};fa.prototype.$VideoUploadMetadataParser8=function(ga,ha,ia,ja){'use strict';try{var ka=i+h;if(ka+t.length<ia&&this.$VideoUploadMetadataParser9(ga,ha+ka)){ka+=t.length;if(ka<ia){var la=this.$VideoUploadMetadataParser6(ga,ha+ka,ia-ka),ma;if(window.DOMParser){var na=new DOMParser();ma=na.parseFromString(la,'text/xml');}else{ma=new window.ActiveXObject('Microsoft.XMLDOM');ma.async='false';ma.loadXML(la);}var oa=ma.getElementsByTagNameNS('*','Spherical')[0].childNodes[0].nodeValue;if(oa.toLowerCase()==='true'){var pa=ma.getElementsByTagNameNS('*','StereoMode')[0],qa=pa?pa.childNodes[0].nodeValue:undefined;ja.sphericalMetadata.spherical=true;ja.sphericalMetadata.originalSphericalMetadata={spherical:true,stereoMode:qa};ja.sphericalMetadata.sphericalMetadataXml=la;}}}}catch(ra){}};fa.prototype.$VideoUploadMetadataParser9=function(ga,ha){'use strict';for(var ia=0;ia<t.length;ia++)if(ga.getUint8(ha+ia)!==t[ia])return false;return true;};fa.prototype.$VideoUploadMetadataParser4=function(ga,ha,ia,ja,ka){'use strict';if(!ka)ka={widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:false,sphericalMetadata:{originalSphericalMetadata:{},sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:false,endOfMediaInformationAtomOffset:null};var la=null;while(ha<ia){var ma=ga.getUint32(ha),na=this.$VideoUploadMetadataParser6(ga,ha+h,i);if(ma===1)ma=c('getVideo64BitAtomLength')(ga,ha,i,h);if(ha+ma>ia){ka.completed=false;ka.nextOffset=ha;if(ma>ia)ka.nextOffset+=ma;return ka;}if(ka.isParsingInMediaInformationAtom&&ha>=ka.endOfMediaInformationAtomOffset){ka.isParsingInMediaInformationAtom=false;ka.endOfMediaInformationAtomOffset=null;}if(ha+ja===0&&na!=='ftyp')throw new Error('No ftyp atom');if(ma===0)throw new Error('len is 0');var oa=function cb(){var db=ga.getUint32(ha+m),eb=ga.getUint32(ha+k);return eb/db;};switch(na){case 'moov':case 'trak':case 'mdia':case 'stbl':ha+=h+i;break;case 'mvhd':ka.duration=oa();ha+=ma;break;case 'tkhd':var pa=ga.getUint16(ha+p),qa=ga.getUint16(ha+l);ka.widths.push(pa);ka.heights.push(qa);la=ga.getUint32(ha+q);ha+=ma;break;case 'hdlr':if(!ka.isParsingInMediaInformationAtom){var ra=this.$VideoUploadMetadataParser6(ga,ha+n,o);switch(ra){case 'vide':ra='video';break;case 'soun':ra='audio';break;case 'subt':ra='subtitle';break;default:ra='data';}ka.streamTypes.push(ra);}ha+=ma;break;case 'mdhd':ka.streamDurations.push(oa());ha+=ma;break;case 'uuid':this.$VideoUploadMetadataParser8(ga,ha,ma,ka);ha+=ma;break;case 'meta':var sa=v+u+s,ta=this.$VideoUploadMetadataParser6(ga,ha+sa,4);if(ta!=='face'){ha+=ma;break;}var ua=h+i+r,va=this.$VideoUploadMetadataParser6(ga,ha+ua,ma-ua);if(va!==null){if(ka.sphericalMetadata.fbSpatialAudioMetadataXml===null)ka.sphericalMetadata.fbSpatialAudioMetadataXml='<fb360_spatial_audio>';if(la){ka.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <track id="'+la.toString()+'">\n                  '+va+'\n                </track>\n              ';}else ka.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <spatial_audio_formatting>\n                  '+va+'\n                </spatial_audio_formatting>\n              ';}ha+=ma;break;case 'minf':var wa=this.$VideoUploadMetadataParser6(ga,ha+2*h+i,i);if(wa==='smhd'){ha+=h+i;ka.isParsingInMediaInformationAtom=true;ka.endOfMediaInformationAtomOffset=ha+ma;}else ha+=ma;break;case 'stsd':var xa=this.$VideoUploadMetadataParser6(ga,ha+i+w,i);if(xa==='mp4a'){ha+=w;}else ha+=ma;break;case 'mp4a':var ya=ga.getUint32(ha+x),za=ga.getUint32(ha+x+ya),ab=this.$VideoUploadMetadataParser6(ga,ha+x+ya+h,i);if(ab==='SA3D'){var bb=this.$VideoUploadMetadataParser7(ga,ha+x+ya+h+i,za);if(bb!==null)if(ka.sphericalMetadata.ytSa3dMetadataJson===null)ka.sphericalMetadata.ytSa3dMetadataJson=bb;}ha+=ma;break;default:ha+=ma;}}ka.completed=true;if(ka.sphericalMetadata.fbSpatialAudioMetadataXml)ka.sphericalMetadata.fbSpatialAudioMetadataXml+='</fb360_spatial_audio>';return ka;};fa.prototype.$VideoUploadMetadataParser5=function(ga){'use strict';var ha={streams:{},format:{},metadata:{}},ia=ga.widths.length,ja=ga.heights.length,ka=ga.streamTypes.length,la=ga.streamDurations.length;if(ia!==ja||ia!==ka||ia!==la)return null;for(var ma=0;ma<ia;ma++){var na={width:ga.widths[ma],height:ga.heights[ma],duration:ga.streamDurations[ma],type:ga.streamTypes[ma]};if(na.type==='video'){var oa=na.width*na.height,pa=ha.streams.primaryVideo;if(!pa||pa.width*pa.height>oa)ha.streams.primaryVideo=na;}else if(na.type==='audio'){var qa=ha.streams.primaryAudio;if(!qa||qa.duration<na.duration)ha.streams.primaryAudio=na;}}ha.format.duration=ga.duration;ha.format.isSpherical=ga.sphericalMetadata.spherical;if(ga.sphericalMetadata.spherical){ha.metadata.originalSphericalMetadata=ga.sphericalMetadata.originalSphericalMetadata;ha.metadata.sphericalMetadataXml=ga.sphericalMetadata.sphericalMetadataXml;ha.metadata.fbSpatialAudioMetadataXml=ga.sphericalMetadata.fbSpatialAudioMetadataXml;ha.metadata.ytSa3dMetadataJson=ga.sphericalMetadata.ytSa3dMetadataJson;}c('VideoUploadSphericalLogger').setHasSphericalMetadata(ga.sphericalMetadata.spherical);return ha;};f.exports=fa;}),null);
__d('VideoUploadSession',['ArbiterMixin','AsyncRequest','VideoUploadCrashMonitor','VideoUploadFeatureDetector','VideoUploadFileValidator','VideoUploadLogger','VideoUploadMetadataParser','VideoUploadPostRequestManager','VideoUploadReceiveRequestManager','VideoUploadRequestContext','VideoUploadStartRequestManager','WaterfallIDGenerator','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploadSession1=k.source;this.$VideoUploadSession2=k.target_id;this.$VideoUploadSession3=k.logging_delay;this.$VideoUploadSession4=k.silent_file_validation;this.$VideoUploadSession5=k.background_upload;this.$VideoUploadSession6=k.actor_id;this.$VideoUploadSession7=k.composer_entry_point_ref;this.$VideoUploadSession8=k.monitor_crashes;this.$VideoUploadSession9=k.isMultiMediaPost;this.$VideoUploadSession10=k.container_type;this.$VideoUploadSession11=k.number_of_partitions;this.$VideoUploadSession12=k.multi_partitioning_enabled;this.$VideoUploadSession13=new (c('VideoUploadFileValidator'))({minSize:k.min_size,maxSize:k.max_size,minLength:k.min_length,maxLength:k.max_length,minWidth:k.min_width,minHeight:k.min_height,extensions:k.extensions,source:k.source,require16to9AspectRatio:k.require_16to9_aspect_ratio,minAspectRatio:k.min_aspect_ratio,maxAspectRatio:k.max_aspect_ratio});this.$VideoUploadSession14=c('VideoUploadFeatureDetector').supportsChunking();this.$VideoUploadSession15=c('VideoUploadFeatureDetector').supportsFileAPI();if(this.$VideoUploadSession14){this.$VideoUploadSession16=k.parallel_chunk_uploads;if(this.$VideoUploadSession16){this.$VideoUploadSession17=k.parallel_chunk_upload_filesize;this.$VideoUploadSession18=k.default_chunk_size;}}else this.$VideoUploadSession16=false;this.$VideoUploadSession19=this.$VideoUploadSession20(k);this.$VideoUploadSession21=this.$VideoUploadSession22(k);if(this.$VideoUploadSession16)if(this.$VideoUploadSession12){var l=0;this.$VideoUploadSession23=[];for(l=0;l<this.$VideoUploadSession11-1;l++)this.$VideoUploadSession23[l]=this.$VideoUploadSession22(k);}else this.$VideoUploadSession23=this.$VideoUploadSession22(k);this.$VideoUploadSession24=this.$VideoUploadSession25(k);}j.prototype.$VideoUploadSession26=function(){'use strict';this.$VideoUploadSession27=[];this.$VideoUploadSession28=[];this.$VideoUploadSession29=[];this.$VideoUploadSession30=[];this.$VideoUploadSession31=[];var k=0;for(k=0;k<this.$VideoUploadSession32-1;k++)this.$VideoUploadSession27.push(false);};j.prototype.$VideoUploadSession33=function(){'use strict';this.$VideoUploadSession34=c('WaterfallIDGenerator').generate();this.$VideoUploadSession35=new (c('VideoUploadLogger'))({actor_id:this.$VideoUploadSession6,source:this.$VideoUploadSession1,waterfall_id:this.$VideoUploadSession34,target_id:this.$VideoUploadSession2,delay:this.$VideoUploadSession3,is_chunked_upload:this.$VideoUploadSession14,composer_entry_point_ref:this.$VideoUploadSession7,container_type:this.$VideoUploadSession10});this.inform('set-waterfall-id',{waterfallID:this.$VideoUploadSession34});};j.prototype.createTestLogger=function(){'use strict';this.$VideoUploadSession33();};j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploadSession35)return null;return this.$VideoUploadSession35;};j.prototype.start=function(k){'use strict';this.$VideoUploadSession36=null;this.$VideoUploadSession37=false;this.$VideoUploadSession38=false;this.$VideoUploadSession39=k;this.$VideoUploadSession40=0;this.$VideoUploadSession41=false;this.$VideoUploadSession42={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null};this.$VideoUploadSession43=false;this.$VideoUploadSession33();if(this.$VideoUploadSession12)this.$VideoUploadSession32=Math.min(this.$VideoUploadSession11,Math.ceil(this.$VideoUploadSession39.getSize()/this.$VideoUploadSession17));this.__logEvent(c('VideoUploadLogger').EVENT_REQUESTED_UPLOADING);this.inform('upload-requested');var l=new (c('VideoUploadMetadataParser'))(this.$VideoUploadSession39,this.$VideoUploadSession44.bind(this));l.parse();};j.prototype.post=function(k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_POST_REQUEST);this.inform('post-started',k);var l=this.__createPostRequestContext(k);this.$VideoUploadSession24.sendRequest(l);this.$VideoUploadSession45=k;};j.prototype.__createPostRequestContext=function(k){'use strict';var l=new (c('VideoUploadRequestContext'))();this.__setupPostRequestContext(l,k);return l;};j.prototype.__setupPostRequestContext=function(k,l){'use strict';k.setMetadata(l).setVideoID(this.$VideoUploadSession36).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession34).setSupportsChunking(this.$VideoUploadSession14).setCreatorProduct(this.$VideoUploadSession39.getCreatorProduct()).setFile(this.$VideoUploadSession39);if(l){if(l.spherical){this.$VideoUploadSession41=true;k.setIsSphericalVideo(this.$VideoUploadSession41);}if(l.enable_omnistab){this.$VideoUploadSession43=true;k.setEnableOmnistab(this.$VideoUploadSession43);}}if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploadSession37)return;var k=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession46();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession38)this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);if(this.$VideoUploadSession47){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession47=false;}}else{this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);}};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploadSession37)return;var k=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession46();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession38)this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);if(this.$VideoUploadSession47){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession47=false;}}else{this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);}};j.prototype.isPostInProgress=function(){'use strict';return this.$VideoUploadSession24.isInProgress();};j.prototype.isInProgress=function(){'use strict';return this.$VideoUploadSession37;};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploadSession36;};j.prototype.getUploadTime=function(){'use strict';return this.$VideoUploadSession48;};j.prototype.getExPartitionNumber=function(k){'use strict';var l=0;for(l=0;l<this.$VideoUploadSession32-1;l++)if(k>=this.$VideoUploadSession28[l]&&k<this.$VideoUploadSession29[l])break;if(l===this.$VideoUploadSession32)return -1;return l;};j.prototype.startFlow=function(){'use strict';if(!this.$VideoUploadSession5||this.$VideoUploadSession47)return;this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession41?'true':null});this.$VideoUploadSession47=true;if(this.$VideoUploadSession49)this.$VideoUploadSession49.flowStarted();};j.prototype.$VideoUploadSession44=function(k){'use strict';var l,m;if(this.$VideoUploadSession4){var n=this.$VideoUploadSession13.getValidationErrorMessage(this.$VideoUploadSession39,k);if(n){m={error_summary:n.summary,error_description:n.description};l=false;}else l=true;}else l=this.$VideoUploadSession13.validate(this.$VideoUploadSession39,k);if(!l){this.__logEvent(c('VideoUploadLogger').EVENT_INVALIDATED_UPLOADING);this.inform('upload-failed',m);return;}if(k&&k.format){this.$VideoUploadSession41=k.format.isSpherical;if(k.metadata){this.$VideoUploadSession42.sphericalMetadataXml=k.metadata.sphericalMetadataXml;this.$VideoUploadSession42.fbSpatialAudioMetadataXml=k.metadata.fbSpatialAudioMetadataXml;this.$VideoUploadSession42.ytSa3dMetadataJson=k.metadata.ytSa3dMetadataJson;}}if(!this.$VideoUploadSession5)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession41?'true':null});this.$VideoUploadSession50=this.$VideoUploadSession16&&this.$VideoUploadSession39.getSize()>=this.$VideoUploadSession17;this.$VideoUploadSession51=false;this.$VideoUploadSession52=0;this.$VideoUploadSession53=this.$VideoUploadSession52;this.$VideoUploadSession54=0;if(this.$VideoUploadSession12){this.$VideoUploadSession26();}else this.$VideoUploadSession27=false;if(this.$VideoUploadSession50){if(this.$VideoUploadSession12){var o=0;this.$VideoUploadSession55=Math.ceil(this.$VideoUploadSession39.getSize()/this.$VideoUploadSession32);var p=this.$VideoUploadSession55,q=this.$VideoUploadSession55;for(o=0;o<this.$VideoUploadSession32-1;o++){this.$VideoUploadSession28[o]=p;p=Math.min(this.$VideoUploadSession28[o]+q,this.$VideoUploadSession39.getSize());this.$VideoUploadSession29[o]=p;this.$VideoUploadSession30[o]=this.$VideoUploadSession28[o];this.$VideoUploadSession31[o]=0;}}else{this.$VideoUploadSession55=Math.floor(this.$VideoUploadSession39.getSize()/2);this.$VideoUploadSession28=this.$VideoUploadSession55;this.$VideoUploadSession30=this.$VideoUploadSession28;this.$VideoUploadSession31=0;this.$VideoUploadSession29=this.$VideoUploadSession39.getSize();}}else this.$VideoUploadSession55=this.$VideoUploadSession39.getSize();var r=new (c('VideoUploadRequestContext'))().setFile(this.$VideoUploadSession39).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession34).setSupportsChunking(this.$VideoUploadSession14).setSupportsFileAPI(this.$VideoUploadSession15).setCreatorProduct(this.$VideoUploadSession39.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession52).setPartitionEndOffset(this.$VideoUploadSession55);if(this.$VideoUploadSession16)r.setUseParallelChunks(this.$VideoUploadSession16);if(this.$VideoUploadSession41){r.setIsSphericalVideo(this.$VideoUploadSession41);r.setSphericalMetadata(this.$VideoUploadSession42);}if(r.setComposerEntryPointRef)r.setComposerEntryPointRef(this.$VideoUploadSession7);this.$VideoUploadSession56();this.$VideoUploadSession19.sendRequest(r);this.inform('metadata-parsed',k);};j.prototype.$VideoUploadSession20=function(k){'use strict';var l=this.$VideoUploadSession14?k.chunk_start_uri:k.start_uri,m=this.__getVideoUploadStartRequestManager(l,k.start_max_transport_retries,k.start_transport_retry_interval_base,k.skip_upload_enabled,k.skip_upload_file_size_limit,k.start_max_server_retries,k.start_server_retry_interval_base);m.subscribe('request-started',this.$VideoUploadSession57.bind(this));m.subscribe('request-finished',this.$VideoUploadSession58.bind(this));m.subscribe('request-failed',this.$VideoUploadSession59.bind(this));return m;};j.prototype.$VideoUploadSession22=function(k){'use strict';var l=this.$VideoUploadSession14?k.chunk_receive_uri:k.receive_uri,m=this.__getVideoUploadReceiveRequestManager(l,k);m.subscribe('request-started',this.$VideoUploadSession60.bind(this));m.subscribe('request-progressed',this.$VideoUploadSession61.bind(this));m.subscribe('request-finished',this.$VideoUploadSession62.bind(this));m.subscribe('request-failed',this.$VideoUploadSession63.bind(this));m.subscribe('request-timeout',this.$VideoUploadSession64.bind(this));m.subscribe('online',this.$VideoUploadSession65.bind(this));m.subscribe('offline',this.$VideoUploadSession66.bind(this));return m;};j.prototype.$VideoUploadSession25=function(k){'use strict';var l=this.$VideoUploadSession14?k.chunk_post_uri:k.post_uri,m=this.__getVideoUploadPostRequestManager(l,k);m.subscribe('request-finished',this.__handlePostRequestFinished.bind(this));m.subscribe('request-failed',this.$VideoUploadSession67.bind(this));return m;};j.prototype.$VideoUploadSession57=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_UPLOADING,{hash_time:k.hash_time,hash_exception:k.hash_exception});this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_START_REQUEST);this.$VideoUploadSession68=Date.now();this.inform('upload-started');};j.prototype.$VideoUploadSession58=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:k.transport_retries,hash_time:k.hash_time,skip_upload:k.skip_upload?1:null});this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_START_REQUEST);this.$VideoUploadSession36=k.video_id;this.$VideoUploadSession69=k.skip_upload;if(!k.skip_upload){var l;l=this.__createReceiveRequestContext(k,false);this.$VideoUploadSession21.sendRequest(l);if(this.$VideoUploadSession50)if(this.$VideoUploadSession12){var m=0;for(m=0;m<this.$VideoUploadSession32-1;m++){l=this.__createReceiveRequestContext(k,true,m);this.$VideoUploadSession23[m].sendRequest(l);}}else{l=this.__createReceiveRequestContext(k,true);this.$VideoUploadSession23.sendRequest(l);}}else{this.inform('upload-progressed',{start_offset:0,end_offset:this.$VideoUploadSession39.getSize(),file_size:this.$VideoUploadSession39.getSize(),sent_bytes:this.$VideoUploadSession39.getSize(),video_id:k.video_id,skip_upload:k.skip_upload});if(this.$VideoUploadSession5)this.__logFinishedUploading();this.inform('upload-finished',{start_offset:0,end_offset:this.$VideoUploadSession39.getSize(),video_id:k.video_id});}};j.prototype.__fetchReceiveRequestManagerStateLogData=function(){'use strict';var k={};if(this.$VideoUploadSession21!=null)this.$VideoUploadSession21.appendStateLogData(k,'requestManager_');if(this.$VideoUploadSession12){var l=0;for(l=0;l<this.$VideoUploadSession32-1;l++)if(this.$VideoUploadSession23[l]!=null)this.$VideoUploadSession23[l].appendStateLogData(k,'requestManagerEx_'+l.toString());}else if(this.$VideoUploadSession23!=null)this.$VideoUploadSession23.appendStateLogData(k,'requestManagerEx_');return k;};j.prototype.__createReceiveRequestContext=function(k,l,m){'use strict';if(!l)l=false;var n=new (c('VideoUploadRequestContext'))();this.$VideoUploadSession12?this.__setupReceiveRequestContext(n,k,l,m):this.__setupReceiveRequestContext(n,k,l);return n;};j.prototype.__setupReceiveRequestContext=function(k,l,m,n){'use strict';var o,p,q,r;if(!m){o=this.$VideoUploadSession52;p=this.$VideoUploadSession55;q=l.start_offset;r=l.end_offset;}else if(this.$VideoUploadSession12){o=this.$VideoUploadSession28[n];p=this.$VideoUploadSession29[n];q=this.$VideoUploadSession28[n];r=this.$VideoUploadSession28[n]+this.$VideoUploadSession18>=this.$VideoUploadSession29[n]?this.$VideoUploadSession29[n]:this.$VideoUploadSession28[n]+this.$VideoUploadSession18;}else{o=this.$VideoUploadSession28;p=this.$VideoUploadSession29;q=this.$VideoUploadSession28;r=this.$VideoUploadSession28+this.$VideoUploadSession18>=this.$VideoUploadSession29?this.$VideoUploadSession29:this.$VideoUploadSession28+this.$VideoUploadSession18;}k.setFile(this.$VideoUploadSession39).setVideoID(l.video_id).setStartOffset(q).setEndOffset(r).setPartitionStartOffset(o).setPartitionEndOffset(p).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession34).setSupportsChunking(this.$VideoUploadSession14);if(this.$VideoUploadSession16)k.setUseParallelChunks(this.$VideoUploadSession16);if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.$VideoUploadSession59=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_START_REQUEST,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession47){this.__logEvent(m);this.$VideoUploadSession47=false;}}else this.__logEvent(m);this.$VideoUploadSession70();this.inform('upload-failed',k);};j.prototype.$VideoUploadSession60=function(event,k){'use strict';if(!k.start_offset&&!k.transport_retries&&!k.server_retries)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession39.getSize()});if(this.$VideoUploadSession14)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,total_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed});};j.prototype.$VideoUploadSession61=function(event,k){'use strict';if(k.start_offset<this.$VideoUploadSession55){this.$VideoUploadSession53=k.start_offset;this.$VideoUploadSession54=k.sent_bytes;}else if(this.$VideoUploadSession12){var l=0;l=this.getExPartitionNumber(k.start_offset);if(l>-1){this.$VideoUploadSession30[l]=k.start_offset;this.$VideoUploadSession31[l]=k.sent_bytes;}}else{this.$VideoUploadSession30=k.start_offset;this.$VideoUploadSession31=k.sent_bytes;}k.start_offset=this.$VideoUploadSession53;k.sent_bytes=this.$VideoUploadSession54;if(this.$VideoUploadSession50)if(this.$VideoUploadSession12){for(l=0;l<this.$VideoUploadSession32-1;l++){k.start_offset+=this.$VideoUploadSession30[l]-this.$VideoUploadSession28[l];k.sent_bytes+=this.$VideoUploadSession31[l];}}else{k.start_offset+=this.$VideoUploadSession30-this.$VideoUploadSession28;k.sent_bytes+=this.$VideoUploadSession31;}var m=Math.min(k.start_offset+k.sent_bytes,k.file_size);if(m>this.$VideoUploadSession40){this.$VideoUploadSession40=m;this.inform('upload-progressed',k);}};j.prototype.$VideoUploadSession62=function(event,k){'use strict';if(this.$VideoUploadSession14)this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed});var l=false;if(k.start_offset<this.$VideoUploadSession55){this.$VideoUploadSession51=k.end_offset>=this.$VideoUploadSession55;}else if(this.$VideoUploadSession12){var m=0;m=this.getExPartitionNumber(k.start_offset);if(m===-1){var n={error_summary:'Invalid offset',error_description:'Offset doesn\'t fall in any exPartition range.'};this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING);this.inform('upload-failed',n);return;}this.$VideoUploadSession27[m]=k.end_offset>=this.$VideoUploadSession29[m];}else this.$VideoUploadSession27=k.end_offset>=this.$VideoUploadSession29;if(this.$VideoUploadSession12){for(m=0;m<this.$VideoUploadSession32-1;m++)if(this.$VideoUploadSession27[m]===false){l=false;break;}else l=true;}else l=this.$VideoUploadSession27;if(!this.$VideoUploadSession15||this.$VideoUploadSession51&&(!this.$VideoUploadSession50||l)){this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession39.getSize()});this.$VideoUploadSession48=Date.now()-this.$VideoUploadSession68;if(this.$VideoUploadSession5)this.__logFinishedUploading();k.video_id=this.$VideoUploadSession36;this.inform('upload-finished',k);if(this.$VideoUploadSession9){this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW);this.$VideoUploadSession47=false;this.$VideoUploadSession70();this.inform('multimedia-upload-finished',k);}}};j.prototype.$VideoUploadSession63=function(event,k){'use strict';var l=this.__getLogErrorData(k);if(this.$VideoUploadSession14)this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_SENDING_CHUNK_BYTES,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession47){this.__logEvent(m);this.$VideoUploadSession47=false;}}else this.__logEvent(m);this.$VideoUploadSession70();this.inform('upload-failed',k);};j.prototype.$VideoUploadSession64=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_TIMEOUT_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,timeout_retries:k.timeout_retries,upload_speed:k.upload_speed});};j.prototype.$VideoUploadSession65=function(event,k){'use strict';this.inform('online',k);};j.prototype.$VideoUploadSession66=function(event,k){'use strict';this.inform('offline',k);};j.prototype.__handlePostRequestFinished=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_POST_REQUEST);if(!k.video_id)k.video_id=this.$VideoUploadSession36;if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW);this.$VideoUploadSession47=false;this.$VideoUploadSession70();var l=babelHelpers['extends']({},k,this.$VideoUploadSession45);this.inform('post-finished',l);};j.prototype.__logFinishedUploading=function(){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSession48,skip_upload:this.$VideoUploadSession69?1:null});this.$VideoUploadSession38=true;};j.prototype.$VideoUploadSession67=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_POST_REQUEST,l);if(this.$VideoUploadSession37){this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;this.__logEvent(m);}this.$VideoUploadSession70();this.inform('post-failed',k);};j.prototype.$VideoUploadSession46=function(){'use strict';this.$VideoUploadSession19.cancelRequest();this.$VideoUploadSession21.cancelRequest();if(this.$VideoUploadSession50)if(this.$VideoUploadSession12){var k=0;for(k=0;k<this.$VideoUploadSession32-1;k++)this.$VideoUploadSession23[k].cancelRequest();}else this.$VideoUploadSession23.cancelRequest();this.$VideoUploadSession70();if(this.$VideoUploadSession36){new (c('AsyncRequest'))('/ajax/video/actions/delete').setData({fbid:this.$VideoUploadSession36,redirect:false}).send();this.$VideoUploadSession36=null;}};j.prototype.$VideoUploadSession56=function(){'use strict';this.$VideoUploadSession37=true;if(this.$VideoUploadSession8){this.$VideoUploadSession49=new (c('VideoUploadCrashMonitor'))(this.$VideoUploadSession34,this.$VideoUploadSession6,this.$VideoUploadSession1,this.$VideoUploadSession2,this.$VideoUploadSession3,this.$VideoUploadSession14,this.$VideoUploadSession7,!this.$VideoUploadSession5||this.$VideoUploadSession47);this.$VideoUploadSession49.startSession();}};j.prototype.$VideoUploadSession70=function(){'use strict';this.$VideoUploadSession37=false;if(this.$VideoUploadSession49){this.$VideoUploadSession49.endSession();this.$VideoUploadSession49=null;}};j.prototype.__getLogErrorData=function(k){'use strict';return {error:k.error_summary,error_code:k.error_code,error_description:k.error_description,transport_retries:k.transport_retries,server_retries:k.server_retries};};j.prototype.__logEvent=function(event,k){'use strict';var l=this.getLogger();k=k||{};if(this.$VideoUploadSession39){k.file_size=this.$VideoUploadSession39.getSize();k.file_extension=this.$VideoUploadSession39.getExtension();k.sent_bytes=this.$VideoUploadSession40;}l.logEvent(event,k);};j.prototype.__getVideoUploadStartRequestManager=function(k,l,m,n,o,p,q){'use strict';return new (c('VideoUploadStartRequestManager'))(k,l,m,n,o,p,q);};j.prototype.__getVideoUploadReceiveRequestManager=function(k,l){'use strict';return new (c('VideoUploadReceiveRequestManager'))(k,l.max_transport_retries,l.max_server_retries,l.response_timeout_enabled,l.max_response_timeout_retries,l.response_timeout_speed_variation_factor_ppt,l.transport_retry_interval_base,l.server_retry_interval_base,l.receive_errors_force_retry);};j.prototype.__getVideoUploadPostRequestManager=function(k,l){'use strict';return new (c('VideoUploadPostRequestManager'))(k,l.post_max_transport_retries,l.post_transport_retry_interval_base,l.post_max_server_retries,l.post_server_retry_interval_base);};f.exports=j;}),null);
__d('VideoUploader',['ArbiterMixin','VideoUploadCrashMonitor','VideoUploadSession','arrayContains','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploader1=k;this.$VideoUploader2=null;if(k.monitor_crashes){this.$VideoUploader3=new (c('VideoUploadCrashMonitor'))();this.$VideoUploader3.logKnownCrashes();}}j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger();};j.prototype.upload=function(k){'use strict';if(this.$VideoUploader2)return;this.$VideoUploader2=this.__getVideoUploadSession(this.$VideoUploader1);this.$VideoUploader2.subscribe(this.__getEventsWhichShouldListenFromSession(),function(event,l){return this.$VideoUploader4(event,l);}.bind(this));this.$VideoUploader2.start(k);};j.prototype.__getVideoUploadSession=function(k){'use strict';return new (c('VideoUploadSession'))(k);};j.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';return ['upload-requested','upload-started','upload-progressed','upload-finished','upload-failed','post-started','post-finished','post-failed','online','offline','metadata-parsed','set-waterfall-id'];};j.prototype.postUserRequest=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.startFlow)this.$VideoUploader2.startFlow();};j.prototype.post=function(k){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.post(k);};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploader2.getVideoID();};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.cancel();this.$VideoUploader2=null;};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.abandon();this.$VideoUploader2=null;};j.prototype.reset=function(){'use strict';this.$VideoUploader2=null;};j.prototype.getUploadSession=function(){'use strict';return this.$VideoUploader2;};j.prototype.getLoggerData=function(){'use strict';return {waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader5:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref};};j.prototype.isPostInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress();};j.prototype.isSessionInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isInProgress();};j.prototype.getUploadParameters=function(){'use strict';return this.$VideoUploader1;};j.prototype.__getSession=function(){'use strict';return this.$VideoUploader2;};j.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed','post-finished','multimedia-upload-finished'];};j.prototype.$VideoUploader4=function(event,k){'use strict';if(c('arrayContains')(this.__getEventsForWhichSessionShouldBeSetToNull(),event))this.$VideoUploader2=null;this.__delegateEvent(event,k);};j.prototype.__delegateEvent=function(event,k){'use strict';this.inform(event,k);};f.exports=j;}),null);
__d('LineClamp.react',['cx','Locale','React','getVendorPrefixedName','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('getVendorPrefixedName')('lineClamp');i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.$LineClamp1=function(){var m;if(this.props.lineHeight&&!this.props.customEllipsisDisableGradient)m={bottom:this.props.lineHeight+'px'};var n;if(this.props.customEllipsis&&this.props.customEllipsisDisableGradient){n=c('Locale').isRTL()?"_1osp":"_1osq";}else n=c('Locale').isRTL()?"_4ik3 _2k5c":"_4ik3 _2k5d";return c('React').createElement('div',{style:m,className:n,key:'ellipsis'},this.props.customEllipsis?this.props.customEllipsis:'\u2026');};l.prototype.render=function(){var m=!!k&&!this.props.disableNative,n=c('joinClasses')(this.props.className,"_4ik4"+(m?' '+"_4ik5":'')),o=this.props.children,p={};if(this.props.lineHeight){p={lineHeight:this.props.lineHeight+'px'};if(this.props.fitHeightToShorterText){p=babelHelpers['extends']({},p,{maxHeight:this.props.lineHeight*this.props.lines});}else p=babelHelpers['extends']({},p,{height:this.props.lineHeight*this.props.lines});}if(m){p[k]=this.props.lines;}else{n=c('joinClasses')(n,'clearfix');if(this.props.customEllipsisDisableGradient){o=[c('React').createElement('div',{className:"_1osu",key:'spacer'}),this.$LineClamp1(),c('React').createElement('div',{className:"_1osv",key:'inner'},this.props.children)];}else o=[c('React').createElement('div',{className:"_4ik6",key:'inner'},o),this.$LineClamp1()];}return c('React').createElement('div',{className:n,style:p},o);};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('DraftStringKey',[],(function a(b,c,d,e,f,g){'use strict';var h={stringify:function i(j){return '_'+String(j);},unstringify:function i(j){return j.slice(1);}};f.exports=h;}),null);
__d('encodeEntityRanges',['DraftStringKey','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('UnicodeUtils').strlen;function i(j,k){var l=[];j.findEntityRanges(function(m){return !!m.getEntity();},function(m,n){var o=j.getText(),p=j.getEntityAt(m);l.push({offset:h(o.slice(0,m)),length:h(o.slice(m,n)),key:Number(k[c('DraftStringKey').stringify(p)])});});return l;}f.exports=i;}),null);
__d('findRangesImmutable',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){if(!i.size)return;var m=0;i.reduce(function(n,o,p){if(!j(n,o)){if(k(n))l(m,p);m=p;}return o;});k(i.last())&&l(m,i.count());}f.exports=h;}),null);
__d('encodeInlineStyleRanges',['UnicodeUtils','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h=function m(n,o){return n===o;},i=function m(n){return !!n;},j=[];function k(m,n,o){var p=[],q=n.map(function(r){return r.has(o);}).toList();c('findRangesImmutable')(q,h,i,function(r,s){var t=m.getText();p.push({offset:c('UnicodeUtils').strlen(t.slice(0,r)),length:c('UnicodeUtils').strlen(t.slice(r,s)),style:o});});return p;}function l(m){var n=m.getCharacterList().map(function(p){return p.getStyle();}).toList(),o=n.flatten().toSet().map(function(p){return k(m,n,p);});return Array.prototype.concat.apply(j,o.toJS());}f.exports=l;}),null);
__d('convertFromDraftStateToRaw',['DraftStringKey','encodeEntityRanges','encodeInlineStyleRanges'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=0,k={},l=[];i.getBlockMap().forEach(function(o,p){o.findEntityRanges(function(q){return q.getEntity()!==null;},function(q){var r=c('DraftStringKey').stringify(o.getEntityAt(q));if(!Object.prototype.hasOwnProperty.call(k,r))k[r]=''+j++;});l.push({key:p,text:o.getText(),type:o.getType(),depth:o.getDepth(),inlineStyleRanges:c('encodeInlineStyleRanges')(o),entityRanges:c('encodeEntityRanges')(o,k),data:o.getData().toObject()});});var m=Object.keys(k),n={};m.forEach(function(o,p){var q=i.getEntity(c('DraftStringKey').unstringify(o));n[p]={type:q.getType(),mutability:q.getMutability(),data:q.getData()};});return {entityMap:n,blocks:l};}f.exports=h;}),null);
__d('encodeBlocks',['ComposedBlockType','ComposedEntityType','ComposedInlineStyle','convertFromDraftStateToRaw','mapObject','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=c('convertFromDraftStateToRaw')(k),m=l.blocks,n=l.entityMap,o=m.map(function(q){var r=q.key,s=q.type,t=q.text,u=q.depth,v=q.inlineStyleRanges,w=q.entityRanges;return {key:c('nullthrows')(r),type:i[s],text:t,depth:c('nullthrows')(u),inlineStyleRanges:c('nullthrows')(v).map(function(x){return babelHelpers['extends']({},x,{style:j[x.style]});}),entityRanges:c('nullthrows')(w)};}),p=c('mapObject')(n,function(q){var r=q.data,s=null,t=undefined;if(typeof r==='object'){s=r.id;t=babelHelpers.objectWithoutProperties(r,['id']);if(Object.keys(t).length===0){t=undefined;}else t=c('mapObject')(t,function(u){return u==null?'':String(u);});}return {id:s||null,type:c('ComposedEntityType')[q.type],data:t};});return {blocks:o,entityMap:p};}var i={unstyled:c('ComposedBlockType').UNSTYLED,paragraph:c('ComposedBlockType').PARAGRAPH,blockquote:c('ComposedBlockType').BLOCKQUOTE,'ordered-list-item':c('ComposedBlockType').ORDERED_LIST_ITEM,'unordered-list-item':c('ComposedBlockType').UNORDERED_LIST_ITEM,'code-block':c('ComposedBlockType').CODE,'header-one':c('ComposedBlockType').HEADER_ONE,'header-two':c('ComposedBlockType').HEADER_TWO,atomic:c('ComposedBlockType').MEDIA,pullquote:c('ComposedBlockType').PULLQUOTE,'header-three':c('ComposedBlockType').HEADER_TWO,'header-four':c('ComposedBlockType').HEADER_TWO,'header-five':c('ComposedBlockType').HEADER_TWO,'header-six':c('ComposedBlockType').HEADER_TWO},j={BOLD:c('ComposedInlineStyle').BOLD,CODE:c('ComposedInlineStyle').CODE,ITALIC:c('ComposedInlineStyle').ITALIC,STRIKETHROUGH:c('ComposedInlineStyle').STRIKETHROUGH,UNDERLINE:c('ComposedInlineStyle').UNDERLINE};f.exports=h;}),null);
__d('DraftEntityInstance',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=j({type:'TOKEN',mutability:'IMMUTABLE',data:Object});h=babelHelpers.inherits(l,k);i=h&&h.prototype;l.prototype.getType=function(){return this.get('type');};l.prototype.getMutability=function(){return this.get('mutability');};l.prototype.getData=function(){return this.get('data');};function l(){h.apply(this,arguments);}f.exports=l;}),null);
__d('DraftEntity',['invariant','DraftEntityInstance','immutable'],(function a(b,c,d,e,f,g,h){var i=c('immutable').Map,j=i(),k=0;function l(n,o){}var m={getLastCreatedEntityKey:function n(){l('DraftEntity.getLastCreatedEntityKey','contentState.getLastCreatedEntityKey');return m.__getLastCreatedEntityKey();},create:function n(o,p,q){l('DraftEntity.create','contentState.createEntity');return m.__create(o,p,q);},add:function n(o){l('DraftEntity.add','contentState.addEntity');return m.__add(o);},get:function n(o){l('DraftEntity.get','contentState.getEntity');return m.__get(o);},mergeData:function n(o,p){l('DraftEntity.mergeData','contentState.mergeEntityData');return m.__mergeData(o,p);},replaceData:function n(o,p){l('DraftEntity.replaceData','contentState.replaceEntityData');return m.__replaceData(o,p);},__getLastCreatedEntityKey:function n(){return ''+k;},__create:function n(o,p,q){return m.__add(new (c('DraftEntityInstance'))({type:o,mutability:p,data:q||{}}));},__add:function n(o){var p=''+ ++k;j=j.set(p,o);return p;},__get:function n(o){var p=j.get(o);!!p||h(0);return p;},__mergeData:function n(o,p){var q=m.__get(o),r=babelHelpers['extends']({},q.getData(),p),s=q.set('data',r);j=j.set(o,s);return s;},__replaceData:function n(o,p){var q=m.__get(o),r=q.set('data',p);j=j.set(o,r);return r;}};f.exports=m;}),null);
__d('LoadObjectOperations',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CREATING:null,DELETING:null,LOADING:null,UPDATING:null});f.exports=h;}),null);
__d('LoadObject',['invariant','immutable','LoadObjectOperations','Map','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=[undefined,null,false,true,0,''],l='SECRET_'+Math.random(),m=new (c('Map'))(new (c('Map'))(k.map(function(p){return [p,new (c('Map'))([[true,new (c('Map'))()],[false,new (c('Map'))()]])];}))),n=c('immutable').Record({operation:undefined,value:undefined,error:undefined,internalHasValue:false});i=babelHelpers.inherits(o,n);j=i&&i.prototype;function o(p,q,r,s,t){p===l||h(0);j.constructor.call(this,{operation:q,value:r,error:s,internalHasValue:t});}o.$LoadObject1=function(p,q,r,s){var t=o.$LoadObject2(p,q,r,s);return t||new o(l,p,q,r,s);};o.$LoadObject2=function(p,q,r,s){if(r!==undefined||!m.has(q))return null;var t=c('nullthrows')(m.get(q)),u=c('nullthrows')(t.get(s));if(!u.has(p)){var v=new o(l,p,q,r,s);u.set(p,v);}return c('nullthrows')(u.get(p));};o.prototype.getOperation=function(){return this.get('operation');};o.prototype.getValue=function(){return this.get('value');};o.prototype.getValueEnforcing=function(){this.hasValue()||h(0);var p=this.getValue();return p;};o.prototype.getError=function(){return this.get('error');};o.prototype.getErrorEnforcing=function(){this.hasError()||h(0);return this.get('error');};o.prototype.hasValue=function(){return !!this.get('internalHasValue');};o.prototype.hasOperation=function(){return this.getOperation()!==undefined;};o.prototype.hasError=function(){return this.getError()!==undefined;};o.prototype.isEmpty=function(){return !this.hasValue()&&!this.hasOperation()&&!this.hasError();};o.prototype.setOperation=function(p){var q=o.$LoadObject2(p,this.getValue(),this.getError(),this.hasValue());return q||this.set('operation',p);};o.prototype.setValue=function(p){var q=o.$LoadObject2(this.getOperation(),p,this.getError(),true);return q||this.set('value',p).set('internalHasValue',true);};o.prototype.setError=function(p){var q=o.$LoadObject2(this.getOperation(),this.getValue(),p,this.hasValue());return q||this.set('error',p);};o.prototype.removeOperation=function(){var p=this.remove('operation'),q=o.$LoadObject2(p.getOperation(),p.getValue(),p.getError(),p.hasValue());return q||p;};o.prototype.removeValue=function(){var p=this.remove('value').remove('internalHasValue'),q=o.$LoadObject2(p.getOperation(),p.getValue(),p.getError(),p.hasValue());return q||p;};o.prototype.removeError=function(){var p=this.remove('error'),q=o.$LoadObject2(p.getOperation(),p.getValue(),p.getError(),p.hasValue());return q||p;};o.prototype.isCreating=function(){return this.getOperation()===c('LoadObjectOperations').CREATING;};o.prototype.isDeleting=function(){return this.getOperation()===c('LoadObjectOperations').DELETING;};o.prototype.isDone=function(){return !this.hasOperation();};o.prototype.isLoading=function(){return this.getOperation()===c('LoadObjectOperations').LOADING;};o.prototype.isUpdating=function(){return this.getOperation()===c('LoadObjectOperations').UPDATING;};o.prototype.creating=function(){return this.setOperation(c('LoadObjectOperations').CREATING);};o.prototype.deleting=function(){return this.setOperation(c('LoadObjectOperations').DELETING);};o.prototype.done=function(){return this.removeOperation();};o.prototype.loading=function(){return this.setOperation(c('LoadObjectOperations').LOADING);};o.prototype.updating=function(){return this.setOperation(c('LoadObjectOperations').UPDATING);};o.prototype.map=function(p){if(!this.hasValue())return this;var q=this.getValueEnforcing(),r=p(q),s=r instanceof o?r:this.setValue(r);return s;};o.prototype.mapError=function(p){if(!this.hasError())return this;var q=this.getErrorEnforcing(),r=p(q);return r instanceof o?r:this.setError(r);};o.creating=function(){return o.$LoadObject1(c('LoadObjectOperations').CREATING,undefined,undefined,false);};o.deleting=function(){return o.$LoadObject1(c('LoadObjectOperations').DELETING,undefined,undefined,false);};o.empty=function(){return o.$LoadObject1(undefined,undefined,undefined,false);};o.loading=function(){return o.$LoadObject1(c('LoadObjectOperations').LOADING,undefined,undefined,false);};o.updating=function(){return o.$LoadObject1(c('LoadObjectOperations').UPDATING,undefined,undefined,false);};o.withError=function(p){return o.$LoadObject1(undefined,undefined,p,false);};o.withValue=function(p){return o.$LoadObject1(undefined,p,undefined,true);};f.exports=o;}),null);
__d("XPagesManagerPublishingToolsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/{page_token}\/publishing_tools\/",{page_token:{type:"String",required:true},business_id:{type:"Int"},current_page:{type:"Int"},section:{type:"String"},source:{type:"Enum",enumType:1},sourceID:{type:"String"},refSource:{type:"Enum",enumType:1},initial_data:{type:"StringToStringMap"}});}),null);
__d("XStickerAssetController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}});}),null);
__d("XVideoEditDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/edit\/dialog\/",{video_id:{type:"Int"},source:{type:"Enum",enumType:1},story_dom_id:{type:"String"},timeline_identifier:{type:"String"},post_id:{type:"String"},video_asset_id:{type:"Int"},__asyncDialog:{type:"Int"}});}),null);